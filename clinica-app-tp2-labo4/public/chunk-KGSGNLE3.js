import{b as bo,c as So,f as nl,g as Ro}from"./chunk-X5YLR3NI.js";import{$ as xr,$a as ro,Ac as yo,B as Kn,Ba as ns,Bc as ls,C as tt,Ca as Bi,Cc as wo,Da as zi,Db as ao,Dc as _o,E as xt,F as Ee,Fa as qi,G as Xn,Ga as jt,H as ki,Ha as nt,Ia as st,J as xi,Ja as Hi,Ka as Vi,La as Gi,Ma as Wi,N as Pi,Na as Ji,O as Q,Oa as Ki,P as Di,Pa as Xi,Qa as Me,R as F,Ra as Yi,S as O,Ta as Ut,U as E,V as Pt,Va as Qi,W as Mi,Wa as Zi,X as j,Xa as it,Y as Yn,Ya as eo,Z as A,Za as to,_ as b,_b as co,a as Ei,aa as ji,ab as Dr,ac as cs,b as Ci,ba as De,bb as no,ca as se,cb as Nt,cc as lo,d as Vn,da as Pr,db as Mr,dc as jr,e as Gn,f as we,g as Y,gb as ss,h as _e,hb as so,i as B,ia as Qn,ib as is,ic as uo,j as _,ja as Ui,jb as os,jc as V,k as kt,ka as Dt,kb as as,kc as Lt,l as Ai,lb as io,lc as ho,m as Ii,ma as Zn,mc as fo,n as I,na as es,nc as po,o as kr,oa as rt,oc as $t,p as H,pa as ce,pc as go,q as Wn,qa as ts,qc as ot,r as Oi,ra as Ni,rc as mo,s as Jn,sa as Li,wa as $i,x as ae,xa as rs,xb as oo,y as Pe,ya as Fi,z as be,za as Mt,zc as vo}from"./chunk-OHARKUW4.js";import{a as g,b as q,e as oe,g as tl,h as rl,i as h}from"./chunk-ODN5LVDJ.js";var ti=oe(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});var Zs=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};ei.default=Zs});var ni=oe(ur=>{"use strict";var Fa=ur&&ur.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ur,"__esModule",{value:!0});var vh=Fa((Ro(),rl(nl))),yh=Fa(ti()),ri=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=vh.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=Object.assign({},this.headers),this.headers[t]=e,this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch,s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(i=>h(this,null,function*(){var o,a,c;let l=null,u=null,d=null,p=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){let C=yield i.text();C===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=C:u=JSON.parse(C))}let m=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");m&&y&&y.length>1&&(d=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,p=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{let m=yield i.text();try{l=JSON.parse(m),Array.isArray(l)&&i.status===404&&(u=[],l=null,p=200,f="OK")}catch{i.status===404&&m===""?(p=204,f="No Content"):l={message:m}}if(l&&this.isMaybeSingle&&(!((c=l?.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,p=200,f="OK"),l&&this.shouldThrowOnError)throw new yh.default(l)}return{error:l,data:u,count:d,status:p,statusText:f}}));return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,c;return{error:{message:`${(o=i?.name)!==null&&o!==void 0?o:"FetchError"}: ${i?.message}`,details:`${(a=i?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i?.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}};ur.default=ri});var ii=oe(hr=>{"use strict";var wh=hr&&hr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(hr,"__esModule",{value:!0});var _h=wh(ni()),si=class extends _h.default{select(t){let e=!1,r=(t??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){let o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){let s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:s=r}={}){let i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;let c=[t?"analyze":null,e?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};hr.default=si});var bn=oe(dr=>{"use strict";var bh=dr&&dr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(dr,"__esModule",{value:!0});var Sh=bh(ii()),oi=class extends Sh.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let r=Array.from(new Set(e)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");let o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){let s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}};dr.default=oi});var ci=oe(pr=>{"use strict";var Rh=pr&&pr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(pr,"__esModule",{value:!0});var fr=Rh(bn()),ai=class{constructor(t,{headers:e={},schema:r,fetch:s}){this.url=t,this.headers=e,this.schema=r,this.fetch=s}select(t,{head:e=!1,count:r}={}){let s=e?"HEAD":"GET",i=!1,o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new fr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:r=!0}={}){let s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),e&&i.push(`count=${e}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){let o=t.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){let a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new fr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){let o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){let c=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){let l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new fr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){let r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),e&&s.push(`count=${e}`),this.headers.Prefer=s.join(","),new fr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){let e="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new fr.default({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};pr.default=ai});var Ba=oe(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.version=void 0;Sn.version="0.0.0-automated"});var za=oe(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.DEFAULT_HEADERS=void 0;var Th=Ba();Rn.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Th.version}`}});var Ha=oe(gr=>{"use strict";var qa=gr&&gr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(gr,"__esModule",{value:!0});var Eh=qa(ci()),Ch=qa(bn()),Ah=za(),li=class n{constructor(t,{headers:e={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},Ah.DEFAULT_HEADERS),e),this.schemaName=r,this.fetch=s}from(t){let e=new URL(`${this.url}/${t}`);return new Eh.default(e,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new n(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:r=!1,get:s=!1,count:i}={}){let o,a=new URL(`${this.url}/rpc/${t}`),c;r||s?(o=r?"HEAD":"GET",Object.entries(e).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",c=e);let l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new Ch.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};gr.default=li});var Ya=oe($=>{"use strict";var _t=$&&$.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty($,"__esModule",{value:!0});$.PostgrestError=$.PostgrestBuilder=$.PostgrestTransformBuilder=$.PostgrestFilterBuilder=$.PostgrestQueryBuilder=$.PostgrestClient=void 0;var Va=_t(Ha());$.PostgrestClient=Va.default;var Ga=_t(ci());$.PostgrestQueryBuilder=Ga.default;var Wa=_t(bn());$.PostgrestFilterBuilder=Wa.default;var Ja=_t(ii());$.PostgrestTransformBuilder=Ja.default;var Ka=_t(ni());$.PostgrestBuilder=Ka.default;var Xa=_t(ti());$.PostgrestError=Xa.default;$.default={PostgrestClient:Va.default,PostgrestQueryBuilder:Ga.default,PostgrestFilterBuilder:Wa.default,PostgrestTransformBuilder:Ja.default,PostgrestBuilder:Ka.default,PostgrestError:Xa.default}});var tc=oe(($p,ec)=>{"use strict";ec.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}});var Lr=new j(""),fs=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(s=>{s.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,s,i){return this._findPluginFor(r).addEventListener(e,r,s,i)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(i=>i.supports(e)),!r)throw new O(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||n)(A(Lr),A(ce))};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})(),Ft=class{_doc;constructor(t){this._doc=t}manager},Ur="ng-app-id";function To(n){for(let t of n)t.remove()}function Eo(n,t){let e=t.createElement("style");return e.textContent=n,e}function sl(n,t,e,r){let s=n.head?.querySelectorAll(`style[${Ur}="${t}"],link[${Ur}="${t}"]`);if(s)for(let i of s)i.removeAttribute(Ur),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&e.set(i.textContent,{usage:0,elements:[i]})}function hs(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var ps=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,r,s,i={}){this.doc=e,this.appId=r,this.nonce=s,this.isServer=ls(i),sl(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let s of e)this.addUsage(s,this.inline,Eo);r?.forEach(s=>this.addUsage(s,this.external,hs))}removeStyles(e,r){for(let s of e)this.removeUsage(s,this.inline);r?.forEach(s=>this.removeUsage(s,this.external))}addUsage(e,r,s){let i=r.get(e);i?i.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,s(e,this.doc)))})}removeUsage(e,r){let s=r.get(e);s&&(s.usage--,s.usage<=0&&(To(s.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])To(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:s}]of this.inline)s.push(this.addElement(e,Eo(r,this.doc)));for(let[r,{elements:s}]of this.external)s.push(this.addElement(e,hs(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Ur,this.appId),e.appendChild(r)}static \u0275fac=function(r){return new(r||n)(A(V),A(rs),A(ns,8),A(Mt))};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})(),us={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},gs=/%COMP%/g;var Ao="%COMP%",il=`_nghost-${Ao}`,ol=`_ngcontent-${Ao}`,al=!0,cl=new j("",{providedIn:"root",factory:()=>al});function ll(n){return ol.replace(gs,n)}function ul(n){return il.replace(gs,n)}function Io(n,t){return t.map(e=>e.replace(gs,n))}var ms=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,s,i,o,a,c,l=null,u=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=i,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=ls(a),this.defaultRenderer=new Bt(e,o,c,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===jt.ShadowDom&&(r=q(g({},r),{encapsulation:jt.Emulated}));let s=this.getOrCreateRenderer(e,r);return s instanceof Nr?s.applyToHost(e):s instanceof zt&&s.applyStyles(),s}getOrCreateRenderer(e,r){let s=this.rendererByCompId,i=s.get(r.id);if(!i){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,p=this.tracingService;switch(r.encapsulation){case jt.Emulated:i=new Nr(c,l,r,this.appId,u,o,a,d,p);break;case jt.ShadowDom:return new ds(c,l,e,r,o,a,this.nonce,d,p);default:i=new zt(c,l,r,u,o,a,d,p);break}s.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||n)(A(fs),A(ps),A(rs),A(cl),A(V),A(Mt),A(ce),A(ns),A(Bi,8))};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})(),Bt=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,r,s,i){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=s,this.tracingService=i}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(us[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(Co(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(Co(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){e.remove()}selectRootElement(t,e){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new O(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,s){if(s){e=s+":"+e;let i=us[s];i?t.setAttributeNS(i,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){let s=us[r];s?t.removeAttributeNS(s,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,s){s&(Ut.DashCase|Ut.Important)?t.style.setProperty(e,r,s&Ut.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&Ut.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t!=null&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r,s){if(typeof t=="string"&&(t=Lt().getGlobalEventTarget(this.doc,t),!t))throw new O(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(t,e,i)),this.eventManager.addEventListener(t,e,i,s)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function Co(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ds=class extends Bt{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,r,s,i,o,a,c,l){super(t,i,o,c,l),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=s.styles;u=Io(s.id,u);for(let p of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=p,this.shadowRoot.appendChild(f)}let d=s.getExternalStyles?.();if(d)for(let p of d){let f=hs(p,i);a&&f.setAttribute("nonce",a),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},zt=class extends Bt{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,r,s,i,o,a,c,l){super(t,i,o,a,c),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=s;let u=r.styles;this.styles=l?Io(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Nr=class extends zt{contentAttr;hostAttr;constructor(t,e,r,s,i,o,a,c,l){let u=s+"-"+r.id;super(t,e,r,i,o,a,c,l,u),this.contentAttr=ll(u),this.hostAttr=ul(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}};var $r=class n extends fo{supportsDOMEvents=!0;static makeCurrent(){ho(new n)}onAndCancel(t,e,r,s){return t.addEventListener(e,r,s),()=>{t.removeEventListener(e,r,s)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=dl();return e==null?null:fl(e)}resetBaseElement(){qt=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return vo(document.cookie,t)}},qt=null;function dl(){return qt=qt||document.head.querySelector("base"),qt?qt.getAttribute("href"):null}function fl(n){return new URL(n,document.baseURI).pathname}var pl=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})(),ko=(()=>{class n extends Ft{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,s,i){return e.addEventListener(r,s,i),()=>this.removeEventListener(e,r,s,i)}removeEventListener(e,r,s,i){return e.removeEventListener(r,s,i)}static \u0275fac=function(r){return new(r||n)(A(V))};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})(),Oo=["alt","control","meta","shift"],gl={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ml={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},xo=(()=>{class n extends Ft{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,r,s,i){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Lt().onAndCancel(e,o.domEventName,a,i))}static parseEventName(e){let r=e.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let i=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),Oo.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=i,r.length!=0||i.length===0)return null;let c={};return c.domEventName=s,c.fullKey=o,c}static matchEventFullKeyCode(e,r){let s=gl[e.key]||e.key,i="";return r.indexOf("code.")>-1&&(s=e.code,i="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Oo.forEach(o=>{if(o!==s){let a=ml[o];a(e)&&(i+=o+".")}}),i+=s,i===r)}static eventCallback(e,r,s){return i=>{n.matchEventFullKeyCode(i,e)&&s.runGuarded(()=>r(i))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||n)(A(V))};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})();function vl(n,t){return lo(g({rootComponent:n},yl(t)))}function yl(n){return{appProviders:[...Rl,...n?.providers??[]],platformProviders:Sl}}function wl(){$r.makeCurrent()}function _l(){return new ts}function bl(){return $i(document),document}var Sl=[{provide:Mt,useValue:yo},{provide:Fi,useValue:wl,multi:!0},{provide:V,useFactory:bl}];var Rl=[{provide:ji,useValue:"root"},{provide:ts,useFactory:_l},{provide:Lr,useClass:ko,multi:!0,deps:[V]},{provide:Lr,useClass:xo,multi:!0,deps:[V]},ms,ps,fs,{provide:Qi,useExisting:ms},{provide:wo,useClass:pl},[]];var ys=class{};var je=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let s=e.slice(0,r),i=e.slice(r+1).trim();this.addHeaderEntry(s,i)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,r)=>{this.addHeaderEntry(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,e);let s=(t.op==="a"?this.headers.get(e):void 0)||[];s.push(...r),this.headers.set(e,s);break;case"d":let i=t.value;if(!i)this.headers.delete(e),this.normalizedNames.delete(e);else{let o=this.headers.get(e);if(!o)return;o=o.filter(a=>i.indexOf(a)===-1),o.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}break}}addHeaderEntry(t,e){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(e):this.headers.set(r,[e])}setHeaderEntries(t,e){let r=(Array.isArray(e)?e:[e]).map(i=>i.toString()),s=t.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(t,s)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var ws=class{encodeKey(t){return Po(t)}encodeValue(t){return Po(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function Tl(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{let i=s.indexOf("="),[o,a]=i==-1?[t.decodeKey(s),""]:[t.decodeKey(s.slice(0,i)),t.decodeValue(s.slice(i+1))],c=e.get(o)||[];c.push(a),e.set(o,c)}),e}var El=/%(\d[a-f0-9])/gi,Cl={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Po(n){return encodeURIComponent(n).replace(El,(t,e)=>Cl[e]??t)}function Fr(n){return`${n}`}var Se=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new ws,t.fromString){if(t.fromObject)throw new O(2805,!1);this.map=Tl(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let r=t.fromObject[e],s=Array.isArray(r)?r.map(Fr):[Fr(r)];this.map.set(e,s)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(r=>{let s=t[r];Array.isArray(s)?s.forEach(i=>{e.push({param:r,value:i,op:"a"})}):e.push({param:r,value:s,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(Fr(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],s=r.indexOf(Fr(t.value));s!==-1&&r.splice(s,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var _s=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function Al(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Do(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Mo(n){return typeof Blob<"u"&&n instanceof Blob}function jo(n){return typeof FormData<"u"&&n instanceof FormData}function Il(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Ol="X-Request-URL",Uo="text/plain",No="application/json",Vd=`${No}, ${Uo}, */*`,ct=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,e,r,s){this.url=e,this.method=t.toUpperCase();let i;if(Al(this.method)||s?(this.body=r!==void 0?r:null,i=s):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers??=new je,this.context??=new _s,!this.params)this.params=new Se,this.urlWithParams=e;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),c=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Do(this.body)||Mo(this.body)||jo(this.body)||Il(this.body)?this.body:this.body instanceof Se?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||jo(this.body)?null:Mo(this.body)?this.body.type||null:Do(this.body)?null:typeof this.body=="string"?Uo:this.body instanceof Se?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?No:null}clone(t={}){let e=t.method||this.method,r=t.url||this.url,s=t.responseType||this.responseType,i=t.transferCache??this.transferCache,o=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,c=t.reportProgress??this.reportProgress,l=t.headers||this.headers,u=t.params||this.params,d=t.context??this.context;return t.setHeaders!==void 0&&(l=Object.keys(t.setHeaders).reduce((p,f)=>p.set(f,t.setHeaders[f]),l)),t.setParams&&(u=Object.keys(t.setParams).reduce((p,f)=>p.set(f,t.setParams[f]),u)),new n(e,r,o,{params:u,headers:l,context:d,reportProgress:c,responseType:s,withCredentials:a,transferCache:i})}},Ss=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ss||{}),bs=class{headers;status;statusText;url;ok;type;constructor(t,e=200,r="OK"){this.headers=t.headers||new je,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var Br=class n extends bs{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Ss.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};function vs(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var kl=(()=>{class n{handler;constructor(e){this.handler=e}request(e,r,s={}){let i;if(e instanceof ct)i=e;else{let c;s.headers instanceof je?c=s.headers:c=new je(s.headers);let l;s.params&&(s.params instanceof Se?l=s.params:l=new Se({fromObject:s.params})),i=new ct(e,r,s.body!==void 0?s.body:null,{headers:c,context:s.context,params:l,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let o=_(i).pipe(be(c=>this.handler.handle(c)));if(e instanceof ct||s.observe==="events")return o;let a=o.pipe(ae(c=>c instanceof Br));switch(s.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(I(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new O(2806,!1);return c.body}));case"blob":return a.pipe(I(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new O(2807,!1);return c.body}));case"text":return a.pipe(I(c=>{if(c.body!==null&&typeof c.body!="string")throw new O(2808,!1);return c.body}));case"json":default:return a.pipe(I(c=>c.body))}case"response":return a;default:throw new O(2809,!1)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new Se().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,s={}){return this.request("PATCH",e,vs(s,r))}post(e,r,s={}){return this.request("POST",e,vs(s,r))}put(e,r,s={}){return this.request("PUT",e,vs(s,r))}static \u0275fac=function(r){return new(r||n)(A(ys))};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})();var Gd=RegExp(`^${Ol}:`,"m");var Lo=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||n)(A(V))};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Pl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:function(r){let s=null;return r?s=new(r||n):s=A(Dl),s},providedIn:"root"})}return n})(),Dl=(()=>{class n extends Pl{_doc;constructor(e){super(),this._doc=e}sanitize(e,r){if(r==null)return null;switch(e){case Me.NONE:return r;case Me.HTML:return st(r,"HTML")?nt(r):Xi(this._doc,String(r)).toString();case Me.STYLE:return st(r,"Style")?nt(r):r;case Me.SCRIPT:if(st(r,"Script"))return nt(r);throw new O(5200,!1);case Me.URL:return st(r,"URL")?nt(r):Ki(String(r));case Me.RESOURCE_URL:if(st(r,"ResourceURL"))return nt(r);throw new O(5201,!1);default:throw new O(5202,!1)}}bypassSecurityTrustHtml(e){return Hi(e)}bypassSecurityTrustStyle(e){return Vi(e)}bypassSecurityTrustScript(e){return Gi(e)}bypassSecurityTrustUrl(e){return Wi(e)}bypassSecurityTrustResourceUrl(e){return Ji(e)}static \u0275fac=function(r){return new(r||n)(A(V))};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var R="primary",rr=Symbol("RouteTitle"),As=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Le(n){return new As(n)}function Go(n,t,e){let r=e.path.split("/");if(r.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||r.length<n.length))return null;let s={};for(let i=0;i<r.length;i++){let o=r[i],a=n[i];if(o[0]===":")s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function jl(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!le(n[e],t[e]))return!1;return!0}function le(n,t){let e=n?Is(n):void 0,r=t?Is(t):void 0;if(!e||!r||e.length!=r.length)return!1;let s;for(let i=0;i<e.length;i++)if(s=e[i],!Wo(n[s],t[s]))return!1;return!0}function Is(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Wo(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),r=[...t].sort();return e.every((s,i)=>r[i]===s)}else return n===t}function Jo(n){return n.length>0?n[n.length-1]:null}function ke(n){return Ai(n)?n:so(n)?B(Promise.resolve(n)):_(n)}var Ul={exact:Xo,subset:Yo},Ko={exact:Nl,subset:Ll,ignored:()=>!0};function $o(n,t,e){return Ul[e.paths](n.root,t.root,e.matrixParams)&&Ko[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function Nl(n,t){return le(n,t)}function Xo(n,t,e){if(!Ue(n.segments,t.segments)||!Hr(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!n.children[r]||!Xo(n.children[r],t.children[r],e))return!1;return!0}function Ll(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Wo(n[e],t[e]))}function Yo(n,t,e){return Qo(n,t,t.segments,e)}function Qo(n,t,e,r){if(n.segments.length>e.length){let s=n.segments.slice(0,e.length);return!(!Ue(s,e)||t.hasChildren()||!Hr(s,e,r))}else if(n.segments.length===e.length){if(!Ue(n.segments,e)||!Hr(n.segments,e,r))return!1;for(let s in t.children)if(!n.children[s]||!Yo(n.children[s],t.children[s],r))return!1;return!0}else{let s=e.slice(0,n.segments.length),i=e.slice(n.segments.length);return!Ue(n.segments,s)||!Hr(n.segments,s,r)||!n.children[R]?!1:Qo(n.children[R],t,i,r)}}function Hr(n,t,e){return t.every((r,s)=>Ko[e](n[s].parameters,r.parameters))}var he=class{root;queryParams;fragment;_queryParamMap;constructor(t=new k([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Le(this.queryParams),this._queryParamMap}toString(){return Bl.serialize(this)}},k=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vr(this)}},Ce=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Le(this.parameters),this._parameterMap}toString(){return ea(this)}};function $l(n,t){return Ue(n,t)&&n.every((e,r)=>le(e.parameters,t[r].parameters))}function Ue(n,t){return n.length!==t.length?!1:n.every((e,r)=>e.path===t[r].path)}function Fl(n,t){let e=[];return Object.entries(n.children).forEach(([r,s])=>{r===R&&(e=e.concat(t(s,r)))}),Object.entries(n.children).forEach(([r,s])=>{r!==R&&(e=e.concat(t(s,r)))}),e}var $e=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:()=>new Ae,providedIn:"root"})}return n})(),Ae=class{parse(t){let e=new ks(t);return new he(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Ht(t.root,!0)}`,r=Hl(t.queryParams),s=typeof t.fragment=="string"?`#${zl(t.fragment)}`:"";return`${e}${r}${s}`}},Bl=new Ae;function Vr(n){return n.segments.map(t=>ea(t)).join("/")}function Ht(n,t){if(!n.hasChildren())return Vr(n);if(t){let e=n.children[R]?Ht(n.children[R],!1):"",r=[];return Object.entries(n.children).forEach(([s,i])=>{s!==R&&r.push(`${s}:${Ht(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=Fl(n,(r,s)=>s===R?[Ht(n.children[R],!1)]:[`${s}:${Ht(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[R]!=null?`${Vr(n)}/${e[0]}`:`${Vr(n)}/(${e.join("//")})`}}function Zo(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function zr(n){return Zo(n).replace(/%3B/gi,";")}function zl(n){return encodeURI(n)}function Os(n){return Zo(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gr(n){return decodeURIComponent(n)}function Fo(n){return Gr(n.replace(/\+/g,"%20"))}function ea(n){return`${Os(n.path)}${ql(n.parameters)}`}function ql(n){return Object.entries(n).map(([t,e])=>`;${Os(t)}=${Os(e)}`).join("")}function Hl(n){let t=Object.entries(n).map(([e,r])=>Array.isArray(r)?r.map(s=>`${zr(e)}=${zr(s)}`).join("&"):`${zr(e)}=${zr(r)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var Vl=/^[^\/()?;#]+/;function Rs(n){let t=n.match(Vl);return t?t[0]:""}var Gl=/^[^\/()?;=#]+/;function Wl(n){let t=n.match(Gl);return t?t[0]:""}var Jl=/^[^=?&#]+/;function Kl(n){let t=n.match(Jl);return t?t[0]:""}var Xl=/^[^&#]+/;function Yl(n){let t=n.match(Xl);return t?t[0]:""}var ks=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new k([],{}):new k([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[R]=new k(t,e)),r}parseSegment(){let t=Rs(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new O(4009,!1);return this.capture(t),new Ce(Gr(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=Wl(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let s=Rs(this.remaining);s&&(r=s,this.capture(r))}t[Gr(e)]=Gr(r)}parseQueryParam(t){let e=Kl(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let o=Yl(this.remaining);o&&(r=o,this.capture(r))}let s=Fo(e),i=Fo(r);if(t.hasOwnProperty(s)){let o=t[s];Array.isArray(o)||(o=[o],t[s]=o),o.push(i)}else t[s]=i}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Rs(this.remaining),s=this.remaining[r.length];if(s!=="/"&&s!==")"&&s!==";")throw new O(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=R);let o=this.parseChildren();e[i]=Object.keys(o).length===1?o[R]:new k([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new O(4011,!1)}};function ta(n){return n.segments.length>0?new k([],{[R]:n}):n}function ra(n){let t={};for(let[r,s]of Object.entries(n.children)){let i=ra(s);if(r===R&&i.segments.length===0&&i.hasChildren())for(let[o,a]of Object.entries(i.children))t[o]=a;else(i.segments.length>0||i.hasChildren())&&(t[r]=i)}let e=new k(n.segments,t);return Ql(e)}function Ql(n){if(n.numberOfChildren===1&&n.children[R]){let t=n.children[R];return new k(n.segments.concat(t.segments),t.children)}return n}function Ie(n){return n instanceof he}function na(n,t,e=null,r=null){let s=sa(n);return ia(s,t,e,r)}function sa(n){let t;function e(i){let o={};for(let c of i.children){let l=e(c);o[c.outlet]=l}let a=new k(i.url,o);return i===n&&(t=a),a}let r=e(n.root),s=ta(r);return t??s}function ia(n,t,e,r){let s=n;for(;s.parent;)s=s.parent;if(t.length===0)return Ts(s,s,s,e,r);let i=Zl(t);if(i.toRoot())return Ts(s,s,new k([],{}),e,r);let o=eu(i,s,n),a=o.processChildren?Gt(o.segmentGroup,o.index,i.commands):aa(o.segmentGroup,o.index,i.commands);return Ts(s,o.segmentGroup,a,e,r)}function Jr(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Jt(n){return typeof n=="object"&&n!=null&&n.outlets}function Ts(n,t,e,r,s){let i={};r&&Object.entries(r).forEach(([c,l])=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;n===t?o=e:o=oa(n,t,e);let a=ta(ra(o));return new he(a,i,s)}function oa(n,t,e){let r={};return Object.entries(n.children).forEach(([s,i])=>{i===t?r[s]=e:r[s]=oa(i,t,e)}),new k(n.segments,r)}var Kr=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&Jr(r[0]))throw new O(4003,!1);let s=r.find(Jt);if(s&&s!==Jo(r))throw new O(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Zl(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Kr(!0,0,n);let t=0,e=!1,r=n.reduce((s,i,o)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...s,{outlets:a}]}if(i.segmentPath)return[...s,i.segmentPath]}return typeof i!="string"?[...s,i]:o===0?(i.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?e=!0:a===".."?t++:a!=""&&s.push(a))}),s):[...s,i]},[]);return new Kr(e,t,r)}var ht=class{segmentGroup;processChildren;index;constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}};function eu(n,t,e){if(n.isAbsolute)return new ht(t,!0,0);if(!e)return new ht(t,!1,NaN);if(e.parent===null)return new ht(e,!0,0);let r=Jr(n.commands[0])?0:1,s=e.segments.length-1+r;return tu(e,s,n.numberOfDoubleDots)}function tu(n,t,e){let r=n,s=t,i=e;for(;i>s;){if(i-=s,r=r.parent,!r)throw new O(4005,!1);s=r.segments.length}return new ht(r,!1,s-i)}function ru(n){return Jt(n[0])?n[0].outlets:{[R]:n}}function aa(n,t,e){if(n??=new k([],{}),n.segments.length===0&&n.hasChildren())return Gt(n,t,e);let r=nu(n,t,e),s=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let i=new k(n.segments.slice(0,r.pathIndex),{});return i.children[R]=new k(n.segments.slice(r.pathIndex),n.children),Gt(i,0,s)}else return r.match&&s.length===0?new k(n.segments,{}):r.match&&!n.hasChildren()?xs(n,t,e):r.match?Gt(n,0,s):xs(n,t,e)}function Gt(n,t,e){if(e.length===0)return new k(n.segments,{});{let r=ru(e),s={};if(Object.keys(r).some(i=>i!==R)&&n.children[R]&&n.numberOfChildren===1&&n.children[R].segments.length===0){let i=Gt(n.children[R],t,e);return new k(n.segments,i.children)}return Object.entries(r).forEach(([i,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(s[i]=aa(n.children[i],t,o))}),Object.entries(n.children).forEach(([i,o])=>{r[i]===void 0&&(s[i]=o)}),new k(n.segments,s)}}function nu(n,t,e){let r=0,s=t,i={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=e.length)return i;let o=n.segments[s],a=e[r];if(Jt(a))break;let c=`${a}`,l=r<e.length-1?e[r+1]:null;if(s>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!zo(c,l,o))return i;r+=2}else{if(!zo(c,{},o))return i;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}function xs(n,t,e){let r=n.segments.slice(0,t),s=0;for(;s<e.length;){let i=e[s];if(Jt(i)){let c=su(i.outlets);return new k(r,c)}if(s===0&&Jr(e[0])){let c=n.segments[t];r.push(new Ce(c.path,Bo(e[0]))),s++;continue}let o=Jt(i)?i.outlets[R]:`${i}`,a=s<e.length-1?e[s+1]:null;o&&a&&Jr(a)?(r.push(new Ce(o,Bo(a))),s+=2):(r.push(new Ce(o,{})),s++)}return new k(r,{})}function su(n){let t={};return Object.entries(n).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[e]=xs(new k([],{}),0,r))}),t}function Bo(n){let t={};return Object.entries(n).forEach(([e,r])=>t[e]=`${r}`),t}function zo(n,t,e){return n==e.path&&le(t,e.parameters)}var Wr="imperative",L=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(L||{}),X=class{id;url;constructor(t,e){this.id=t,this.url=e}},Oe=class extends X{type=L.NavigationStart;navigationTrigger;restoredState;constructor(t,e,r="imperative",s=null){super(t,e),this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Z=class extends X{urlAfterRedirects;type=L.NavigationEnd;constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},G=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(G||{}),ft=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(ft||{}),ue=class extends X{reason;code;type=L.NavigationCancel;constructor(t,e,r,s){super(t,e),this.reason=r,this.code=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},de=class extends X{reason;code;type=L.NavigationSkipped;constructor(t,e,r,s){super(t,e),this.reason=r,this.code=s}},pt=class extends X{error;target;type=L.NavigationError;constructor(t,e,r,s){super(t,e),this.error=r,this.target=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Kt=class extends X{urlAfterRedirects;state;type=L.RoutesRecognized;constructor(t,e,r,s){super(t,e),this.urlAfterRedirects=r,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xr=class extends X{urlAfterRedirects;state;type=L.GuardsCheckStart;constructor(t,e,r,s){super(t,e),this.urlAfterRedirects=r,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yr=class extends X{urlAfterRedirects;state;shouldActivate;type=L.GuardsCheckEnd;constructor(t,e,r,s,i){super(t,e),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Qr=class extends X{urlAfterRedirects;state;type=L.ResolveStart;constructor(t,e,r,s){super(t,e),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zr=class extends X{urlAfterRedirects;state;type=L.ResolveEnd;constructor(t,e,r,s){super(t,e),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},en=class{route;type=L.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},tn=class{route;type=L.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},rn=class{snapshot;type=L.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nn=class{snapshot;type=L.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sn=class{snapshot;type=L.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},on=class{snapshot;type=L.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gt=class{routerEvent;position;anchor;type=L.Scroll;constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Xt=class{},mt=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function iu(n,t){return n.providers&&!n._injector&&(n._injector=Dr(n.providers,t,`Route: ${n.path}`)),n._injector??t}function ie(n){return n.outlet||R}function ou(n,t){let e=n.filter(r=>ie(r)===t);return e.push(...n.filter(r=>ie(r)!==t)),e}function nr(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var an=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return nr(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Fe(this.rootInjector)}},Fe=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let s=this.getOrCreateContext(e);s.outlet=r,this.contexts.set(e,s)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new an(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||n)(A(De))};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cn=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Ps(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){let e=Ps(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Ds(t,this._root);return e.length<2?[]:e[e.length-2].children.map(s=>s.value).filter(s=>s!==t)}pathFromRoot(t){return Ds(t,this._root).map(e=>e.value)}};function Ps(n,t){if(n===t.value)return t;for(let e of t.children){let r=Ps(n,e);if(r)return r}return null}function Ds(n,t){if(n===t.value)return[t];for(let e of t.children){let r=Ds(n,e);if(r.length)return r.unshift(t),r}return[]}var K=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function ut(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Yt=class extends cn{snapshot;constructor(t,e){super(t),this.snapshot=e,Bs(this,t)}toString(){return this.snapshot.toString()}};function ca(n){let t=au(n),e=new Y([new Ce("",{})]),r=new Y({}),s=new Y({}),i=new Y({}),o=new Y(""),a=new fe(e,r,i,o,s,R,n,t.root);return a.snapshot=t.root,new Yt(new K(a,[]),t)}function au(n){let t={},e={},r={},s="",i=new Ne([],t,r,s,e,R,n,null,{});return new Qt("",new K(i,[]))}var fe=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,r,s,i,o,a,c){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=i,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(I(l=>l[rr]))??_(void 0),this.url=t,this.params=e,this.queryParams=r,this.fragment=s,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(I(t=>Le(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(I(t=>Le(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ln(n,t,e="emptyOnly"){let r,{routeConfig:s}=n;return t!==null&&(e==="always"||s?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:g(g({},t.params),n.params),data:g(g({},t.data),n.data),resolve:g(g(g(g({},n.data),t.data),s?.data),n._resolvedData)}:r={params:g({},n.params),data:g({},n.data),resolve:g(g({},n.data),n._resolvedData??{})},s&&ua(s)&&(r.resolve[rr]=s.title),r}var Ne=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[rr]}constructor(t,e,r,s,i,o,a,c,l){this.url=t,this.params=e,this.queryParams=r,this.fragment=s,this.data=i,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Le(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Le(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Qt=class extends cn{url;constructor(t,e){super(e),this.url=t,Bs(this,e)}toString(){return la(this._root)}};function Bs(n,t){t.value._routerState=n,t.children.forEach(e=>Bs(n,e))}function la(n){let t=n.children.length>0?` { ${n.children.map(la).join(", ")} } `:"";return`${n.value}${t}`}function Es(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,le(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),le(t.params,e.params)||n.paramsSubject.next(e.params),jl(t.url,e.url)||n.urlSubject.next(e.url),le(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ms(n,t){let e=le(n.params,t.params)&&$l(n.url,t.url),r=!n.parent!=!t.parent;return e&&!r&&(!n.parent||Ms(n.parent,t.parent))}function ua(n){return typeof n.title=="string"||n.title===null}var ha=new j(""),zs=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=R;activateEvents=new rt;deactivateEvents=new rt;attachEvents=new rt;detachEvents=new rt;routerOutletData=Ni(void 0);parentContexts=b(Fe);location=b(to);changeDetector=b(cs);inputBinder=b(sr,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:s}=e.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new O(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new O(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new O(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new O(4013,!1);this._activatedRoute=e;let s=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new js(e,a,s.injector,this.routerOutletData);this.activated=s.createComponent(o,{index:s.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Mr({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Pr]})}return n})(),js=class{route;childContexts;parent;outletData;constructor(t,e,r,s){this.route=t,this.childContexts=e,this.parent=r,this.outletData=s}get(t,e){return t===fe?this.route:t===Fe?this.childContexts:t===ha?this.outletData:this.parent.get(t,e)}},sr=new j(""),qs=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:r}=e,s=kr([r.queryParams,r.params,r.data]).pipe(Q(([i,o,a],c)=>(a=g(g(g({},i),o),a),c===0?_(a):Promise.resolve(a)))).subscribe(i=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(e);return}let o=uo(r.component);if(!o){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of o.inputs)e.activatedComponentRef.setInput(a,i[a])});this.outletDataSubscriptions.set(e,s)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})(),Hs=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=no({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,s){r&1&&oo(0,"router-outlet")},dependencies:[zs],encapsulation:2})}return n})();function Vs(n){let t=n.children&&n.children.map(Vs),e=t?q(g({},n),{children:t}):g({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==R&&(e.component=Hs),e}function cu(n,t,e){let r=Zt(n,t._root,e?e._root:void 0);return new Yt(r,t)}function Zt(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=t.value;let s=lu(n,t,e);return new K(r,s)}else{if(n.shouldAttach(t.value)){let i=n.retrieve(t.value);if(i!==null){let o=i.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>Zt(n,a)),o}}let r=uu(t.value),s=t.children.map(i=>Zt(n,i));return new K(r,s)}}function lu(n,t,e){return t.children.map(r=>{for(let s of e.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Zt(n,r,s);return Zt(n,r)})}function uu(n){return new fe(new Y(n.url),new Y(n.params),new Y(n.queryParams),new Y(n.fragment),new Y(n.data),n.outlet,n.component,n)}var vt=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},da="ngNavigationCancelingError";function un(n,t){let{redirectTo:e,navigationBehaviorOptions:r}=Ie(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,s=fa(!1,G.Redirect);return s.url=e,s.navigationBehaviorOptions=r,s}function fa(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[da]=!0,e.cancellationCode=t,e}function hu(n){return pa(n)&&Ie(n.url)}function pa(n){return!!n&&n[da]}var du=(n,t,e,r)=>I(s=>(new Us(t,s.targetRouterState,s.currentRouterState,e,r).activate(n),s)),Us=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,r,s,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=i}activate(t){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),Es(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){let s=ut(e);t.children.forEach(i=>{let o=i.value.outlet;this.deactivateRoutes(i,s[o],r),delete s[o]}),Object.values(s).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(t,e,r){let s=t.value,i=e?e.value:null;if(s===i)if(s.component){let o=r.getContext(s.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,r);else i&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let r=e.getContext(t.value.outlet),s=r&&t.value.component?r.children:e,i=ut(t);for(let o of Object.values(i))this.deactivateRouteAndItsChildren(o,s);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let r=e.getContext(t.value.outlet),s=r&&t.value.component?r.children:e,i=ut(t);for(let o of Object.values(i))this.deactivateRouteAndItsChildren(o,s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,e,r){let s=ut(e);t.children.forEach(i=>{this.activateRoutes(i,s[i.value.outlet],r),this.forwardEvent(new on(i.value.snapshot))}),t.children.length&&this.forwardEvent(new nn(t.value.snapshot))}activateRoutes(t,e,r){let s=t.value,i=e?e.value:null;if(Es(s),s===i)if(s.component){let o=r.getOrCreateContext(s.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,r);else if(s.component){let o=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){let a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Es(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=s,o.outlet&&o.outlet.activateWith(s,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,r)}},hn=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},dt=class{component;route;constructor(t,e){this.component=t,this.route=e}};function fu(n,t,e){let r=n._root,s=t?t._root:null;return Vt(r,s,e,[r.value])}function pu(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function wt(n,t){let e=Symbol(),r=t.get(n,e);return r===e?typeof n=="function"&&!Mi(n)?n:t.get(n):r}function Vt(n,t,e,r,s={canDeactivateChecks:[],canActivateChecks:[]}){let i=ut(t);return n.children.forEach(o=>{gu(o,i[o.value.outlet],e,r.concat([o.value]),s),delete i[o.value.outlet]}),Object.entries(i).forEach(([o,a])=>Wt(a,e.getContext(o),s)),s}function gu(n,t,e,r,s={canDeactivateChecks:[],canActivateChecks:[]}){let i=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){let c=mu(o,i,i.routeConfig.runGuardsAndResolvers);c?s.canActivateChecks.push(new hn(r)):(i.data=o.data,i._resolvedData=o._resolvedData),i.component?Vt(n,t,a?a.children:null,r,s):Vt(n,t,e,r,s),c&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new dt(a.outlet.component,o))}else o&&Wt(t,a,s),s.canActivateChecks.push(new hn(r)),i.component?Vt(n,null,a?a.children:null,r,s):Vt(n,null,e,r,s);return s}function mu(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Ue(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Ue(n.url,t.url)||!le(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ms(n,t)||!le(n.queryParams,t.queryParams);case"paramsChange":default:return!Ms(n,t)}}function Wt(n,t,e){let r=ut(n),s=n.value;Object.entries(r).forEach(([i,o])=>{s.component?t?Wt(o,t.children.getContext(i),e):Wt(o,null,e):Wt(o,t,e)}),s.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new dt(t.outlet.component,s)):e.canDeactivateChecks.push(new dt(null,s)):e.canDeactivateChecks.push(new dt(null,s))}function ir(n){return typeof n=="function"}function vu(n){return typeof n=="boolean"}function yu(n){return n&&ir(n.canLoad)}function wu(n){return n&&ir(n.canActivate)}function _u(n){return n&&ir(n.canActivateChild)}function bu(n){return n&&ir(n.canDeactivate)}function Su(n){return n&&ir(n.canMatch)}function ga(n){return n instanceof Ii||n?.name==="EmptyError"}var qr=Symbol("INITIAL_VALUE");function yt(){return Q(n=>kr(n.map(t=>t.pipe(tt(1),Pi(qr)))).pipe(I(t=>{for(let e of t)if(e!==!0){if(e===qr)return qr;if(e===!1||Ru(e))return e}return!0}),ae(t=>t!==qr),tt(1)))}function Ru(n){return Ie(n)||n instanceof vt}function Tu(n,t){return H(e=>{let{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:i,canDeactivateChecks:o}}=e;return o.length===0&&i.length===0?_(q(g({},e),{guardsResult:!0})):Eu(o,r,s,n).pipe(H(a=>a&&vu(a)?Cu(r,i,n,t):_(a)),I(a=>q(g({},e),{guardsResult:a})))})}function Eu(n,t,e,r){return B(n).pipe(H(s=>xu(s.component,s.route,e,t,r)),Ee(s=>s!==!0,!0))}function Cu(n,t,e,r){return B(t).pipe(be(s=>Oi(Iu(s.route.parent,r),Au(s.route,r),ku(n,s.path,e),Ou(n,s.route,e))),Ee(s=>s!==!0,!0))}function Au(n,t){return n!==null&&t&&t(new sn(n)),_(!0)}function Iu(n,t){return n!==null&&t&&t(new rn(n)),_(!0)}function Ou(n,t,e){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return _(!0);let s=r.map(i=>Jn(()=>{let o=nr(t)??e,a=wt(i,o),c=wu(a)?a.canActivate(t,n):se(o,()=>a(t,n));return ke(c).pipe(Ee())}));return _(s).pipe(yt())}function ku(n,t,e){let r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(o=>pu(o)).filter(o=>o!==null).map(o=>Jn(()=>{let a=o.guards.map(c=>{let l=nr(o.node)??e,u=wt(c,l),d=_u(u)?u.canActivateChild(r,n):se(l,()=>u(r,n));return ke(d).pipe(Ee())});return _(a).pipe(yt())}));return _(i).pipe(yt())}function xu(n,t,e,r,s){let i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!i||i.length===0)return _(!0);let o=i.map(a=>{let c=nr(t)??s,l=wt(a,c),u=bu(l)?l.canDeactivate(n,t,e,r):se(c,()=>l(n,t,e,r));return ke(u).pipe(Ee())});return _(o).pipe(yt())}function Pu(n,t,e,r){let s=t.canLoad;if(s===void 0||s.length===0)return _(!0);let i=s.map(o=>{let a=wt(o,n),c=yu(a)?a.canLoad(t,e):se(n,()=>a(t,e));return ke(c)});return _(i).pipe(yt(),ma(r))}function ma(n){return Ci(F(t=>{if(typeof t!="boolean")throw un(n,t)}),I(t=>t===!0))}function Du(n,t,e,r){let s=t.canMatch;if(!s||s.length===0)return _(!0);let i=s.map(o=>{let a=wt(o,n),c=Su(a)?a.canMatch(t,e):se(n,()=>a(t,e));return ke(c)});return _(i).pipe(yt(),ma(r))}var er=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},tr=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function lt(n){return kt(new er(n))}function Mu(n){return kt(new O(4e3,!1))}function ju(n){return kt(fa(!1,G.GuardRejected))}var Ns=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let r=[],s=e.root;for(;;){if(r=r.concat(s.segments),s.numberOfChildren===0)return _(r);if(s.numberOfChildren>1||!s.children[R])return Mu(`${t.redirectTo}`);s=s.children[R]}}applyRedirectCommands(t,e,r,s,i){if(typeof e!="string"){let a=e,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:p,params:f,data:v,title:m}=s,y=se(i,()=>a({params:f,data:v,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:p,title:m}));if(y instanceof he)throw new tr(y);e=y}let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r);if(e[0]==="/")throw new tr(o);return o}applyRedirectCreateUrlTree(t,e,r,s){let i=this.createSegmentGroup(t,e.root,r,s);return new he(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let r={};return Object.entries(t).forEach(([s,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[s]=e[a]}else r[s]=i}),r}createSegmentGroup(t,e,r,s){let i=this.createSegments(t,e.segments,r,s),o={};return Object.entries(e.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(t,c,r,s)}),new k(i,o)}createSegments(t,e,r,s){return e.map(i=>i.path[0]===":"?this.findPosParam(t,i,s):this.findOrReturn(i,r))}findPosParam(t,e,r){let s=r[e.path.substring(1)];if(!s)throw new O(4001,!1);return s}findOrReturn(t,e){let r=0;for(let s of e){if(s.path===t.path)return e.splice(r),s;r++}return t}},Ls={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Uu(n,t,e,r,s){let i=va(n,t,e);return i.matched?(r=iu(t,r),Du(r,t,e,s).pipe(I(o=>o===!0?i:g({},Ls)))):_(i)}function va(n,t,e){if(t.path==="**")return Nu(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?g({},Ls):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let s=(t.matcher||Go)(e,n,t);if(!s)return g({},Ls);let i={};Object.entries(s.posParams??{}).forEach(([a,c])=>{i[a]=c.path});let o=s.consumed.length>0?g(g({},i),s.consumed[s.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:s.consumed,remainingSegments:e.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function Nu(n){return{matched:!0,parameters:n.length>0?Jo(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function qo(n,t,e,r){return e.length>0&&Fu(n,e,r)?{segmentGroup:new k(t,$u(r,new k(e,n.children))),slicedSegments:[]}:e.length===0&&Bu(n,e,r)?{segmentGroup:new k(n.segments,Lu(n,e,r,n.children)),slicedSegments:e}:{segmentGroup:new k(n.segments,n.children),slicedSegments:e}}function Lu(n,t,e,r){let s={};for(let i of e)if(fn(n,t,i)&&!r[ie(i)]){let o=new k([],{});s[ie(i)]=o}return g(g({},r),s)}function $u(n,t){let e={};e[R]=t;for(let r of n)if(r.path===""&&ie(r)!==R){let s=new k([],{});e[ie(r)]=s}return e}function Fu(n,t,e){return e.some(r=>fn(n,t,r)&&ie(r)!==R)}function Bu(n,t,e){return e.some(r=>fn(n,t,r))}function fn(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function zu(n,t,e){return t.length===0&&!n.children[e]}var $s=class{};function qu(n,t,e,r,s,i,o="emptyOnly"){return new Fs(n,t,e,r,s,o,i).recognize()}var Hu=31,Fs=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,r,s,i,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=r,this.config=s,this.urlTree=i,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Ns(this.urlSerializer,this.urlTree)}noMatchError(t){return new O(4002,`'${t.segmentGroup}'`)}recognize(){let t=qo(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(I(({children:e,rootSnapshot:r})=>{let s=new K(r,e),i=new Qt("",s),o=na(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(o),{state:i,tree:o}}))}match(t){let e=new Ne([],Object.freeze({}),Object.freeze(g({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),R,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,R,e).pipe(I(r=>({children:r,rootSnapshot:e})),Pe(r=>{if(r instanceof tr)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof er?this.noMatchError(r):r}))}processSegmentGroup(t,e,r,s,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,e,r,i):this.processSegment(t,e,r,r.segments,s,!0,i).pipe(I(o=>o instanceof K?[o]:[]))}processChildren(t,e,r,s){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return B(i).pipe(be(o=>{let a=r.children[o],c=ou(e,o);return this.processSegmentGroup(t,c,a,o,s)}),xi((o,a)=>(o.push(...a),o)),Kn(null),ki(),H(o=>{if(o===null)return lt(r);let a=ya(o);return Vu(a),_(a)}))}processSegment(t,e,r,s,i,o,a){return B(e).pipe(be(c=>this.processSegmentAgainstRoute(c._injector??t,e,c,r,s,i,o,a).pipe(Pe(l=>{if(l instanceof er)return _(null);throw l}))),Ee(c=>!!c),Pe(c=>{if(ga(c))return zu(r,s,i)?_(new $s):lt(r);throw c}))}processSegmentAgainstRoute(t,e,r,s,i,o,a,c){return ie(r)!==o&&(o===R||!fn(s,i,r))?lt(s):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,s,r,i,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,s,e,r,i,o,c):lt(s)}expandSegmentAgainstRouteUsingRedirect(t,e,r,s,i,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:p}=va(e,s,i);if(!c)return lt(e);typeof s.redirectTo=="string"&&s.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Hu&&(this.allowRedirects=!1));let f=new Ne(i,l,Object.freeze(g({},this.urlTree.queryParams)),this.urlTree.fragment,Ho(s),ie(s),s.component??s._loadedComponent??null,s,Vo(s)),v=ln(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(v.params),f.data=Object.freeze(v.data);let m=this.applyRedirects.applyRedirectCommands(u,s.redirectTo,d,f,t);return this.applyRedirects.lineralizeSegments(s,m).pipe(H(y=>this.processSegment(t,r,e,y.concat(p),o,!1,a)))}matchSegmentAgainstRoute(t,e,r,s,i,o){let a=Uu(e,r,s,t,this.urlSerializer);return r.path==="**"&&(e.children={}),a.pipe(Q(c=>c.matched?(t=r._injector??t,this.getChildConfig(t,r,s).pipe(Q(({routes:l})=>{let u=r._loadedInjector??t,{parameters:d,consumedSegments:p,remainingSegments:f}=c,v=new Ne(p,d,Object.freeze(g({},this.urlTree.queryParams)),this.urlTree.fragment,Ho(r),ie(r),r.component??r._loadedComponent??null,r,Vo(r)),m=ln(v,o,this.paramsInheritanceStrategy);v.params=Object.freeze(m.params),v.data=Object.freeze(m.data);let{segmentGroup:y,slicedSegments:C}=qo(e,p,f,l);if(C.length===0&&y.hasChildren())return this.processChildren(u,l,y,v).pipe(I(N=>new K(v,N)));if(l.length===0&&C.length===0)return _(new K(v,[]));let M=ie(r)===i;return this.processSegment(u,l,y,C,M?R:i,!0,v).pipe(I(N=>new K(v,N instanceof K?[N]:[])))}))):lt(e)))}getChildConfig(t,e,r){return e.children?_({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?_({routes:e._loadedRoutes,injector:e._loadedInjector}):Pu(t,e,r,this.urlSerializer).pipe(H(s=>s?this.configLoader.loadChildren(t,e).pipe(F(i=>{e._loadedRoutes=i.routes,e._loadedInjector=i.injector})):ju(e))):_({routes:[],injector:t})}};function Vu(n){n.sort((t,e)=>t.value.outlet===R?-1:e.value.outlet===R?1:t.value.outlet.localeCompare(e.value.outlet))}function Gu(n){let t=n.value.routeConfig;return t&&t.path===""}function ya(n){let t=[],e=new Set;for(let r of n){if(!Gu(r)){t.push(r);continue}let s=t.find(i=>r.value.routeConfig===i.value.routeConfig);s!==void 0?(s.children.push(...r.children),e.add(s)):t.push(r)}for(let r of e){let s=ya(r.children);t.push(new K(r.value,s))}return t.filter(r=>!e.has(r))}function Ho(n){return n.data||{}}function Vo(n){return n.resolve||{}}function Wu(n,t,e,r,s,i){return H(o=>qu(n,t,e,r,o.extractedUrl,s,i).pipe(I(({state:a,tree:c})=>q(g({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function Ju(n,t){return H(e=>{let{targetSnapshot:r,guards:{canActivateChecks:s}}=e;if(!s.length)return _(e);let i=new Set(s.map(c=>c.route)),o=new Set;for(let c of i)if(!o.has(c))for(let l of wa(c))o.add(l);let a=0;return B(o).pipe(be(c=>i.has(c)?Ku(c,r,n,t):(c.data=ln(c,c.parent,n).resolve,_(void 0))),F(()=>a++),Xn(1),H(c=>a===o.size?_(e):_e))})}function wa(n){let t=n.children.map(e=>wa(e)).flat();return[n,...t]}function Ku(n,t,e,r){let s=n.routeConfig,i=n._resolve;return s?.title!==void 0&&!ua(s)&&(i[rr]=s.title),Xu(i,n,t,r).pipe(I(o=>(n._resolvedData=o,n.data=ln(n,n.parent,e).resolve,null)))}function Xu(n,t,e,r){let s=Is(n);if(s.length===0)return _({});let i={};return B(s).pipe(H(o=>Yu(n[o],t,e,r).pipe(Ee(),F(a=>{if(a instanceof vt)throw un(new Ae,a);i[o]=a}))),Xn(1),I(()=>i),Pe(o=>ga(o)?_e:kt(o)))}function Yu(n,t,e,r){let s=nr(t)??r,i=wt(n,s),o=i.resolve?i.resolve(t,e):se(s,()=>i(t,e));return ke(o)}function Cs(n){return Q(t=>{let e=n(t);return e?B(e).pipe(I(()=>t)):_(t)})}var Gs=(()=>{class n{buildTitle(e){let r,s=e.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(i=>i.outlet===R);return r}getResolvedTitleForRoute(e){return e.data[rr]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:()=>b(_a),providedIn:"root"})}return n})(),_a=(()=>{class n extends Gs{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(A(Lo))};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Be=new j("",{providedIn:"root",factory:()=>({})}),ze=new j(""),pn=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=b(co);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return _(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let r=ke(e.loadComponent()).pipe(I(Sa),F(i=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=i}),xt(()=>{this.componentLoaders.delete(e)})),s=new Gn(r,()=>new we).pipe(Vn());return this.componentLoaders.set(e,s),s}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return _({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=ba(r,this.compiler,e,this.onLoadEndListener).pipe(xt(()=>{this.childrenLoaders.delete(r)})),o=new Gn(i,()=>new we).pipe(Vn());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ba(n,t,e,r){return ke(n.loadChildren()).pipe(I(Sa),H(s=>s instanceof ro||Array.isArray(s)?_(s):B(t.compileModuleAsync(s))),I(s=>{r&&r(n);let i,o,a=!1;return Array.isArray(s)?(o=s,a=!0):(i=s.create(e).injector,o=i.get(ze,[],{optional:!0,self:!0}).flat()),{routes:o.map(Vs),injector:i}}))}function Qu(n){return n&&typeof n=="object"&&"default"in n}function Sa(n){return Qu(n)?n.default:n}var gn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:()=>b(Zu),providedIn:"root"})}return n})(),Zu=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ws=new j(""),Js=new j("");function Ra(n,t,e){let r=n.get(Js),s=n.get(V);return n.get(ce).runOutsideAngular(()=>{if(!s.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let i,o=new Promise(l=>{i=l}),a=s.startViewTransition(()=>(i(),eh(n))),{onViewTransitionCreated:c}=r;return c&&se(n,()=>c({transition:a,from:t,to:e})),o})}function eh(n){return new Promise(t=>{qi({read:()=>setTimeout(t)},{injector:n})})}var Ks=new j(""),mn=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new we;transitionAbortSubject=new we;configLoader=b(pn);environmentInjector=b(De);destroyRef=b(Zn);urlSerializer=b($e);rootContexts=b(Fe);location=b(ot);inputBindingEnabled=b(sr,{optional:!0})!==null;titleStrategy=b(Gs);options=b(Be,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=b(gn);createViewTransition=b(Ws,{optional:!0});navigationErrorHandler=b(Ks,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>_(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=s=>this.events.next(new en(s)),r=s=>this.events.next(new tn(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;this.transitions?.next(q(g({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(e){return this.transitions=new Y(null),this.transitions.pipe(ae(r=>r!==null),Q(r=>{let s=!1,i=!1;return _(r).pipe(Q(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",G.SupersededByNewNavigation),_e;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?q(g({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=o.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!a&&c!=="reload"){let l="";return this.events.next(new de(o.id,this.urlSerializer.serialize(o.rawUrl),l,ft.IgnoredSameUrlNavigation)),o.resolve(!1),_e}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return _(o).pipe(Q(l=>(this.events.next(new Oe(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?_e:Promise.resolve(l))),Wu(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),F(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=q(g({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let u=new Kt(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:u,source:d,restoredState:p,extras:f}=o,v=new Oe(l,this.urlSerializer.serialize(u),d,p);this.events.next(v);let m=ca(this.rootComponentType).snapshot;return this.currentTransition=r=q(g({},o),{targetSnapshot:m,urlAfterRedirects:u,extras:q(g({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,_(r)}else{let l="";return this.events.next(new de(o.id,this.urlSerializer.serialize(o.extractedUrl),l,ft.IgnoredByUrlHandlingStrategy)),o.resolve(!1),_e}}),F(o=>{let a=new Xr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),I(o=>(this.currentTransition=r=q(g({},o),{guards:fu(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),Tu(this.environmentInjector,o=>this.events.next(o)),F(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw un(this.urlSerializer,o.guardsResult);let a=new Yr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),ae(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",G.GuardRejected),!1)),Cs(o=>{if(o.guards.canActivateChecks.length!==0)return _(o).pipe(F(a=>{let c=new Qr(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Q(a=>{let c=!1;return _(a).pipe(Ju(this.paramsInheritanceStrategy,this.environmentInjector),F({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",G.NoDataFromResolver)}}))}),F(a=>{let c=new Zr(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),Cs(o=>{let a=c=>{let l=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(c.routeConfig).pipe(F(u=>{c.component=u}),I(()=>{})));for(let u of c.children)l.push(...a(u));return l};return kr(a(o.targetSnapshot.root)).pipe(Kn(null),tt(1))}),Cs(()=>this.afterPreactivation()),Q(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?B(c).pipe(I(()=>r)):_(r)}),I(o=>{let a=cu(e.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=q(g({},o),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),F(()=>{this.events.next(new Xt)}),du(this.rootContexts,e.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),tt(1),F({next:o=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Z(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{s=!0}}),Di(this.transitionAbortSubject.pipe(F(o=>{throw o}))),xt(()=>{!s&&!i&&this.cancelNavigationTransition(r,"",G.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Pe(o=>{if(this.destroyed)return r.resolve(!1),_e;if(i=!0,pa(o))this.events.next(new ue(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),hu(o)?this.events.next(new mt(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new pt(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=se(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof vt){let{message:l,cancellationCode:u}=un(this.urlSerializer,c);this.events.next(new ue(r.id,this.urlSerializer.serialize(r.extractedUrl),l,u)),this.events.next(new mt(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return _e}))}))}cancelNavigationTransition(e,r,s){let i=new ue(e.id,this.urlSerializer.serialize(e.extractedUrl),r,s);this.events.next(i),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function th(n){return n!==Wr}var Ta=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:()=>b(rh),providedIn:"root"})}return n})(),dn=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},rh=(()=>{class n extends dn{static \u0275fac=(()=>{let e;return function(s){return(e||(e=Qn(n)))(s||n)}})();static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ea=(()=>{class n{urlSerializer=b($e);options=b(Be,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=b(ot);urlHandlingStrategy=b(gn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new he;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:r,targetBrowserUrl:s}){let i=e!==void 0?this.urlHandlingStrategy.merge(e,r):r,o=s??i;return o instanceof he?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:e,finalUrl:r,initialUrl:s}){r&&e?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,s),this.routerState=e):this.rawUrlTree=s}routerState=ca(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:()=>b(nh),providedIn:"root"})}return n})(),nh=(()=>{class n extends Ea{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{e(r.url,r.state,"popstate")})})}handleRouterEvent(e,r){e instanceof Oe?this.updateStateMemento():e instanceof de?this.commitTransition(r):e instanceof Kt?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof Xt?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof ue&&(e.code===G.GuardRejected||e.code===G.NoDataFromResolver)?this.restoreHistory(r):e instanceof pt?this.restoreHistory(r,!0):e instanceof Z&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:r,id:s}){let{replaceUrl:i,state:o}=r;if(this.location.isCurrentPathEqualTo(e)||i){let a=this.browserPageId,c=g(g({},o),this.generateNgRouterState(s,a));this.location.replaceState(e,"",c)}else{let a=g(g({},o),this.generateNgRouterState(s,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,i=this.currentPageId-s;i!==0?this.location.historyGo(i):this.getCurrentUrlTree()===e.finalUrl&&i===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(s){return(e||(e=Qn(n)))(s||n)}})();static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vn(n,t){n.events.pipe(ae(e=>e instanceof Z||e instanceof ue||e instanceof pt||e instanceof de),I(e=>e instanceof Z||e instanceof de?0:(e instanceof ue?e.code===G.Redirect||e.code===G.SupersededByNewNavigation:!1)?2:1),ae(e=>e!==2),tt(1)).subscribe(()=>{t()})}var sh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ih={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},pe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=b(ss);stateManager=b(Ea);options=b(Be,{optional:!0})||{};pendingTasks=b(es);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=b(mn);urlSerializer=b($e);location=b(ot);urlHandlingStrategy=b(gn);_events=new we;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=b(Ta);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=b(ze,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!b(sr,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ei;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(s!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof ue&&r.code!==G.Redirect&&r.code!==G.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Z)this.navigated=!0;else if(r instanceof mt){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),c=g({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||th(s.source)},o);this.scheduleNavigation(a,Wr,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}ah(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Wr,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r,s)=>{this.navigateToSyncWithBrowser(e,s,r)})}navigateToSyncWithBrowser(e,r,s){let i={replaceUrl:!0},o=s?.navigationId?s:null;if(s){let c=g({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(i.state=c)}let a=this.parseUrl(e);this.scheduleNavigation(a,r,o,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Vs),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:s,queryParams:i,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=g(g({},this.currentUrlTree.queryParams),i);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let p=s?s.snapshot:this.routerState.snapshot.root;d=sa(p)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),d=this.currentUrlTree.root}return ia(d,e,u,l??null)}navigateByUrl(e,r={skipLocationChange:!1}){let s=Ie(e)?e:this.parseUrl(e),i=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(i,Wr,null,r)}navigate(e,r={skipLocationChange:!1}){return oh(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,r){let s;if(r===!0?s=g({},sh):r===!1?s=g({},ih):s=r,Ie(e))return $o(this.currentUrlTree,e,s);let i=this.parseUrl(e);return $o(this.currentUrlTree,i,s)}removeEmptyProps(e){return Object.entries(e).reduce((r,[s,i])=>(i!=null&&(r[s]=i),r),{})}scheduleNavigation(e,r,s,i,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((d,p)=>{a=d,c=p});let u=this.pendingTasks.add();return vn(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:i,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oh(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new O(4008,!1)}function ah(n){return!(n instanceof Xt)&&!(n instanceof mt)}var Ca=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new we;constructor(e,r,s,i,o,a){this.router=e,this.route=r,this.tabIndexAttribute=s,this.renderer=i,this.el=o,this.locationStrategy=a;let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=e.events.subscribe(l=>{l instanceof Z&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ie(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,s,i,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||r||s||i||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let r=this.href===null?null:Yi(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(e,r){let s=this.renderer,i=this.el.nativeElement;r!==null?s.setAttribute(i,e,r):s.removeAttribute(i,e)}get urlTree(){return this.routerLinkInput===null?null:Ie(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(it(pe),it(fe),Ui("tabindex"),it(Zi),it(Li),it($t))};static \u0275dir=Mr({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){r&1&&ao("click",function(o){return s.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&io("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",jr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",jr],replaceUrl:[2,"replaceUrl","replaceUrl",jr],routerLink:"routerLink"},features:[Pr]})}return n})();var or=class{};var Aa=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,r,s,i){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=i}setUpPreloading(){this.subscription=this.router.events.pipe(ae(e=>e instanceof Z),be(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){let s=[];for(let i of r){i.providers&&!i._injector&&(i._injector=Dr(i.providers,e,`Route: ${i.path}`));let o=i._injector??e,a=i._loadedInjector??o;(i.loadChildren&&!i._loadedRoutes&&i.canLoad===void 0||i.loadComponent&&!i._loadedComponent)&&s.push(this.preloadConfig(o,i)),(i.children||i._loadedRoutes)&&s.push(this.processRoutes(a,i.children??i._loadedRoutes))}return B(s).pipe(Wn())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let s;r.loadChildren&&r.canLoad===void 0?s=this.loader.loadChildren(e,r):s=_(null);let i=s.pipe(H(o=>o===null?_(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return B([i,o]).pipe(Wn())}else return i})}static \u0275fac=function(r){return new(r||n)(A(pe),A(De),A(or),A(pn))};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ia=new j(""),ch=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,r,s,i,o={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=s,this.zone=i,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Oe?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Z?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof de&&e.code===ft.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof gt&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new gt(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){eo()};static \u0275prov=E({token:n,factory:n.\u0275fac})}return n})();function lh(n,...t){return xr([{provide:ze,multi:!0,useValue:n},[],{provide:fe,useFactory:Oa,deps:[pe]},{provide:os,multi:!0,useFactory:ka},t.map(e=>e.\u0275providers)])}function Oa(n){return n.routerState.root}function ar(n,t){return{\u0275kind:n,\u0275providers:t}}function ka(){let n=b(Dt);return t=>{let e=n.get(as);if(t!==e.components[0])return;let r=n.get(pe),s=n.get(xa);n.get(Ys)===1&&r.initialNavigation(),n.get(Ma,null,Yn.Optional)?.setUpPreloading(),n.get(Ia,null,Yn.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}var xa=new j("",{factory:()=>new we}),Ys=new j("",{providedIn:"root",factory:()=>1});function Pa(){let n=[{provide:Ys,useValue:0},is(()=>{let t=b(Dt);return t.get(po,Promise.resolve()).then(()=>new Promise(r=>{let s=t.get(pe),i=t.get(xa);vn(s,()=>{r(!0)}),t.get(mn).afterPreactivation=()=>(r(!0),i.closed?_(void 0):i),s.initialNavigation()}))})];return ar(2,n)}function Da(){let n=[is(()=>{b(pe).setUpLocationChangeListener()}),{provide:Ys,useValue:2}];return ar(3,n)}var Ma=new j("");function ja(n){return ar(0,[{provide:Ma,useExisting:Aa},{provide:or,useExisting:n}])}function Ua(){return ar(8,[qs,{provide:sr,useExisting:qs}])}function Na(n){zi("NgRouterViewTransitions");let t=[{provide:Ws,useValue:Ra},{provide:Js,useValue:g({skipNextTransition:!!n?.skipInitialTransition},n)}];return ar(9,t)}var La=[ot,{provide:$e,useClass:Ae},pe,Fe,{provide:fe,useFactory:Oa,deps:[pe]},pn,[]],uh=(()=>{class n{constructor(){}static forRoot(e,r){return{ngModule:n,providers:[La,[],{provide:ze,multi:!0,useValue:e},[],r?.errorHandler?{provide:Ks,useValue:r.errorHandler}:[],{provide:Be,useValue:r||{}},r?.useHash?dh():fh(),hh(),r?.preloadingStrategy?ja(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?ph(r):[],r?.bindToComponentInputs?Ua().\u0275providers:[],r?.enableViewTransitions?Na().\u0275providers:[],gh()]}}static forChild(e){return{ngModule:n,providers:[{provide:ze,multi:!0,useValue:e}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Nt({type:n});static \u0275inj=Pt({})}return n})();function hh(){return{provide:Ia,useFactory:()=>{let n=b(_o),t=b(ce),e=b(Be),r=b(mn),s=b($e);return e.scrollOffset&&n.setOffset(e.scrollOffset),new ch(s,r,n,t,e)}}}function dh(){return{provide:$t,useClass:mo}}function fh(){return{provide:$t,useClass:go}}function ph(n){return[n.initialNavigation==="disabled"?Da().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Pa().\u0275providers:[]]}var Xs=new j("");function gh(){return[{provide:Xs,useFactory:ka},{provide:os,multi:!0,useExisting:Xs}]}var $a=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-NPJLHOA5.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)};var cr=class extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}},yn=class extends cr{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},wn=class extends cr{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},_n=class extends cr{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},Qs=function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n}(Qs||{});var mh=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})},lr=class{constructor(t,{headers:e={},customFetch:r,region:s=Qs.Any}={}){this.url=t,this.headers=e,this.region=s,this.fetch=$a(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var r;return mh(this,void 0,void 0,function*(){try{let{headers:s,method:i,body:o}=e,a={},{region:c}=e;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let l;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));let u=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:l}).catch(v=>{throw new yn(v)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new wn(u);if(!u.ok)throw new _n(u);let p=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return p==="application/json"?f=yield u.json():p==="application/octet-stream"?f=yield u.blob():p==="text/event-stream"?f=u:p==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(s){return{data:null,error:s}}})}};var Qa=tl(Ya(),1),{PostgrestClient:Za,PostgrestQueryBuilder:Mp,PostgrestFilterBuilder:jp,PostgrestTransformBuilder:Up,PostgrestBuilder:Np,PostgrestError:Ih}=Qa.default;var ui;typeof window>"u"?ui=tc():ui=window.WebSocket;var rc=ui;var nc="2.11.10";var sc={"X-Client-Info":`realtime-js/${nc}`},ic="1.0.0";var Tn=1e4,oc=1e3,bt=function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n}(bt||{}),z=function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n}(z||{}),ee=function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n}(ee||{}),hi=function(n){return n.websocket="websocket",n}(hi||{}),qe=function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n}(qe||{});var En=class{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){let e=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,e,r)}_decodeBroadcast(t,e,r){let s=e.getUint8(1),i=e.getUint8(2),o=this.HEADER_LENGTH+2,a=r.decode(t.slice(o,o+s));o=o+s;let c=r.decode(t.slice(o,o+i));o=o+i;let l=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:c,payload:l}}};var St=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var P=function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n}(P||{}),fi=(n,t,e={})=>{var r;let s=(r=e.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=Oh(o,n,t,s),i),{})},Oh=(n,t,e,r)=>{let s=t.find(a=>a.name===n),i=s?.type,o=e[n];return i&&!r.includes(i)?ac(i,o):di(o)},ac=(n,t)=>{if(n.charAt(0)==="_"){let e=n.slice(1,n.length);return Dh(t,e)}switch(n){case P.bool:return kh(t);case P.float4:case P.float8:case P.int2:case P.int4:case P.int8:case P.numeric:case P.oid:return xh(t);case P.json:case P.jsonb:return Ph(t);case P.timestamp:return Mh(t);case P.abstime:case P.date:case P.daterange:case P.int4range:case P.int8range:case P.money:case P.reltime:case P.text:case P.time:case P.timestamptz:case P.timetz:case P.tsrange:case P.tstzrange:return di(t);default:return di(t)}},di=n=>n,kh=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},xh=n=>{if(typeof n=="string"){let t=parseFloat(n);if(!Number.isNaN(t))return t}return n},Ph=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},Dh=(n,t)=>{if(typeof n!="string")return n;let e=n.length-1,r=n[e];if(n[0]==="{"&&r==="}"){let i,o=n.slice(1,e);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>ac(t,a))}return n},Mh=n=>typeof n=="string"?n.replace(" ","T"):n,Cn=n=>{let t=n;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};var Rt=class{constructor(t,e,r={},s=Tn){this.channel=t,this.event=e,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var mr=class n{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{let{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=n.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{let{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=n.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,s){let i=this.cloneDeep(t),o=this.transformState(e),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{let d=i[l];if(d){let p=u.map(y=>y.presence_ref),f=d.map(y=>y.presence_ref),v=u.filter(y=>f.indexOf(y.presence_ref)<0),m=d.filter(y=>p.indexOf(y.presence_ref)<0);v.length>0&&(a[l]=v),m.length>0&&(c[l]=m)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},r,s)}static syncDiff(t,e,r,s){let{joins:i,leaves:o}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var l;let u=(l=t[a])!==null&&l!==void 0?l:[];if(t[a]=this.cloneDeep(c),u.length>0){let d=t[a].map(f=>f.presence_ref),p=u.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...p)}r(a,u,c)}),this.map(o,(a,c)=>{let l=t[a];if(!l)return;let u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=l,s(a,l,c),l.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{let s=t[r];return"metas"in s?e[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):e[r]=s,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Re=function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n}(Re||{});var vr=class n{constructor(t,e={config:{}},r){this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=z.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new Rt(this,ee.join,this.params,this.timeout),this.rejoinTimer=new St(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=z.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=z.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=z.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=z.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ee.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new mr(this),this.broadcastEndpointURL=Cn(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,e=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>t?.(Re.CHANNEL_ERROR,u)),this._onClose(()=>t?.(Re.CLOSED));let c={},l={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",d=>h(this,[d],function*({postgres_changes:u}){var p;if(this.socket.setAuth(),u===void 0){t?.(Re.SUBSCRIBED);return}else{let f=this.bindings.postgres_changes,v=(p=f?.length)!==null&&p!==void 0?p:0,m=[];for(let y=0;y<v;y++){let C=f[y],{filter:{event:M,schema:N,table:w,filter:x}}=C,ne=u&&u[y];if(ne&&ne.event===M&&ne.schema===N&&ne.table===w&&ne.filter===x)m.push(Object.assign(Object.assign({},C),{id:ne.id}));else{this.unsubscribe(),this.state=z.errored,t?.(Re.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t(Re.SUBSCRIBED);return}})).receive("error",u=>{this.state=z.errored,t?.(Re.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t?.(Re.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){return h(this,arguments,function*(t,e={}){return yield this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)})}untrack(){return h(this,arguments,function*(t={}){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,e,r){return this._on(t,e,r)}send(r){return h(this,arguments,function*(t,e={}){var s,i;if(!this._canPush()&&t.type==="broadcast"){let{event:o,payload:a}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{let u=yield this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=e.timeout)!==null&&s!==void 0?s:this.timeout);return yield(i=u.body)===null||i===void 0?void 0:i.cancel(),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,c,l;let u=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(c=(a=this.params)===null||a===void 0?void 0:a.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=z.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ee.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{let s=new Rt(this,ee.leave,{},t);s.receive("ok",()=>{e(),r("ok")}).receive("timeout",()=>{e(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}_fetchWithTimeout(t,e,r){return h(this,null,function*(){let s=new AbortController,i=setTimeout(()=>s.abort(),r),o=yield this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:s.signal}));return clearTimeout(i),o})}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Rt(this,t,e,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var s,i;let o=t.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=ee;if(r&&[a,c,l,u].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,e,r);if(e&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var v,m,y;return((v=f.filter)===null||v===void 0?void 0:v.event)==="*"||((y=(m=f.filter)===null||m===void 0?void 0:m.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(f=>f.callback(p,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var v,m,y,C,M,N;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){let w=f.id,x=(v=f.filter)===null||v===void 0?void 0:v.event;return w&&((m=e.ids)===null||m===void 0?void 0:m.includes(w))&&(x==="*"||x?.toLocaleLowerCase()===((y=e.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{let w=(M=(C=f?.filter)===null||C===void 0?void 0:C.event)===null||M===void 0?void 0:M.toLocaleLowerCase();return w==="*"||w===((N=e?.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof p=="object"&&"ids"in p){let v=p.data,{schema:m,table:y,commit_timestamp:C,type:M,errors:N}=v;p=Object.assign(Object.assign({},{schema:m,table:y,commit_timestamp:C,eventType:M,new:{},old:{},errors:N}),this._getPayloadRecords(v))}f.callback(p,r)})}_isClosed(){return this.state===z.closed}_isJoined(){return this.state===z.joined}_isJoining(){return this.state===z.joining}_isLeaving(){return this.state===z.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){let s=t.toLocaleLowerCase(),i={type:s,filter:e,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,e){let r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&n.isEqual(s.filter,e))}),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ee.close,{},t)}_onError(t){this._on(ee.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=z.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=fi(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=fi(t.columns,t.old_record)),e}};var cc=()=>{},Uh=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,yr=class{constructor(t,e){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=sc,this.params={},this.timeout=Tn,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=cc,this.ref=0,this.logger=cc,this.conn=null,this.sendBuffer=[],this.serializer=new En,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>import("./chunk-NPJLHOA5.js").then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${t}/${hi.websocket}`,this.httpEndpoint=Cn(t),e?.transport?this.transport=e.transport:this.transport=null,e?.params&&(this.params=e.params),e?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),e.headers)),e?.timeout&&(this.timeout=e.timeout),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),e?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);let s=(r=e?.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=e?.reconnectAfterMs?e.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=e?.encode?e.encode:(i,o)=>o(JSON.stringify(i)),this.decode=e?.decode?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new St(()=>h(this,null,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(e?.fetch),e?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=e?.worker||!1,this.workerUrl=e?.workerUrl}this.accessToken=e?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=rc),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new pi(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ic}))}disconnect(t,e){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,e??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}removeChannel(t){return h(this,null,function*(){let e=yield t.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==t._joinRef),this.channels.length===0&&this.disconnect(),e})}removeAllChannels(){return h(this,null,function*(){let t=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),t})}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case bt.connecting:return qe.Connecting;case bt.open:return qe.Open;case bt.closing:return qe.Closing;default:return qe.Closed}}isConnected(){return this.connectionState()===qe.Open}channel(t,e={config:{}}){let r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{let i=new vr(`realtime:${t}`,e,this);return this.channels.push(i),i}}push(t){let{topic:e,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${e} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(t=null){return h(this,null,function*(){let e=t||this.accessToken&&(yield this.accessToken())||this.accessTokenValue;this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(r=>{e&&r.updateJoinPayload({access_token:e,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(ee.access_token,{access_token:e})}))})}sendHeartbeat(){return h(this,null,function*(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(oc,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),yield this.setAuth()})}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,e=>{let{topic:r,event:s,payload:i,ref:o}=e;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(e.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(e))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(ee.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;let r=t.match(/\?/)?"&":"?",s=new URLSearchParams(e);return`${t}${r}${s}`}_workerObjectUrl(t){let e;if(t)e=t;else{let r=new Blob([Uh],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}};var pi=class{constructor(t,e,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=bt.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}};var Tt=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function U(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var An=class extends Tt{constructor(t,e){super(t),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}},He=class extends Tt{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};var Nh=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})},On=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-NPJLHOA5.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},lc=()=>Nh(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-NPJLHOA5.js")).Response:Response}),In=n=>{if(Array.isArray(n))return n.map(e=>In(e));if(typeof n=="function"||n!==Object(n))return n;let t={};return Object.entries(n).forEach(([e,r])=>{let s=e.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=In(r)}),t};var Ve=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})},gi=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Lh=(n,t,e)=>Ve(void 0,void 0,void 0,function*(){let r=yield lc();n instanceof r&&!e?.noResolveJson?n.json().then(s=>{t(new An(gi(s),n.status||500))}).catch(s=>{t(new He(gi(s),s))}):t(new He(gi(n),n))}),$h=(n,t,e,r)=>{let s={method:n,headers:t?.headers||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t?.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),e))};function wr(n,t,e,r,s,i){return Ve(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(e,$h(t,r,s,i)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Lh(c,a,r))})})}function Et(n,t,e,r){return Ve(this,void 0,void 0,function*(){return wr(n,"GET",t,e,r)})}function ge(n,t,e,r,s){return Ve(this,void 0,void 0,function*(){return wr(n,"POST",t,r,s,e)})}function uc(n,t,e,r,s){return Ve(this,void 0,void 0,function*(){return wr(n,"PUT",t,r,s,e)})}function hc(n,t,e,r){return Ve(this,void 0,void 0,function*(){return wr(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}function kn(n,t,e,r,s){return Ve(this,void 0,void 0,function*(){return wr(n,"DELETE",t,r,s,e)})}var W=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})},Fh={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},dc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},xn=class{constructor(t,e={},r,s){this.url=t,this.headers=e,this.bucketId=r,this.fetch=On(s)}uploadOrUpdate(t,e,r,s){return W(this,void 0,void 0,function*(){try{let i,o=Object.assign(Object.assign({},dc),s),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)}),c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s?.headers&&(a=Object.assign(Object.assign({},a),s.headers));let l=this._removeEmptyFolders(e),u=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:a},o?.duplex?{duplex:o.duplex}:{})),p=yield d.json();return d.ok?{data:{path:l,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(i){if(U(i))return{data:null,error:i};throw i}})}upload(t,e,r){return W(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,s){return W(this,void 0,void 0,function*(){let i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let c,l=Object.assign({upsert:dc.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);let d=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u}),p=yield d.json();return d.ok?{data:{path:i,fullPath:p.Key},error:null}:{data:null,error:p}}catch(c){if(U(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,e){return W(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),s=Object.assign({},this.headers);e?.upsert&&(s["x-upsert"]="true");let i=yield ge(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Tt("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}})}update(t,e,r){return W(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e,r){return W(this,void 0,void 0,function*(){try{return{data:yield ge(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(U(s))return{data:null,error:s};throw s}})}copy(t,e,r){return W(this,void 0,void 0,function*(){try{return{data:{path:(yield ge(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(U(s))return{data:null,error:s};throw s}})}createSignedUrl(t,e,r){return W(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield ge(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(U(s))return{data:null,error:s};throw s}})}createSignedUrls(t,e,r){return W(this,void 0,void 0,function*(){try{let s=yield ge(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(U(s))return{data:null,error:s};throw s}})}download(t,e){return W(this,void 0,void 0,function*(){let s=typeof e?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(e?.transform||{}),o=i?`?${i}`:"";try{let a=this._getFinalPath(t);return{data:yield(yield Et(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(U(a))return{data:null,error:a};throw a}})}info(t){return W(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{let r=yield Et(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:In(r),error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}})}exists(t){return W(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{return yield hc(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(U(r)&&r instanceof He){let s=r.originalError;if([400,404].includes(s?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,e){let r=this._getFinalPath(t),s=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&s.push(i);let a=typeof e?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(e?.transform||{});c!==""&&s.push(c);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(t){return W(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(U(e))return{data:null,error:e};throw e}})}list(t,e,r){return W(this,void 0,void 0,function*(){try{let s=Object.assign(Object.assign(Object.assign({},Fh),e),{prefix:t||""});return{data:yield ge(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(U(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};var fc="2.7.1";var pc={"X-Client-Info":`storage-js/${fc}`};var Ct=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})},Pn=class{constructor(t,e={},r){this.url=t,this.headers=Object.assign(Object.assign({},pc),e),this.fetch=On(r)}listBuckets(){return Ct(this,void 0,void 0,function*(){try{return{data:yield Et(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(U(t))return{data:null,error:t};throw t}})}getBucket(t){return Ct(this,void 0,void 0,function*(){try{return{data:yield Et(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(U(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return Ct(this,void 0,void 0,function*(){try{return{data:yield ge(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}})}updateBucket(t,e){return Ct(this,void 0,void 0,function*(){try{return{data:yield uc(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Ct(this,void 0,void 0,function*(){try{return{data:yield ge(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(U(e))return{data:null,error:e};throw e}})}deleteBucket(t){return Ct(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(U(e))return{data:null,error:e};throw e}})}};var _r=class extends Pn{constructor(t,e={},r){super(t,e,r)}from(t){return new xn(this.url,this.headers,t,this.fetch)}};var gc="2.50.0";var br="";typeof Deno<"u"?br="deno":typeof document<"u"?br="web":typeof navigator<"u"&&navigator.product==="ReactNative"?br="react-native":br="node";var Bh={"X-Client-Info":`supabase-js-${br}/${gc}`},mc={headers:Bh},vc={schema:"public"},yc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},wc={};Ro();var zh=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})},qh=n=>{let t;return n?t=n:typeof fetch>"u"?t=bo:t=fetch,(...e)=>t(...e)},Hh=()=>typeof Headers>"u"?So:Headers,_c=(n,t,e)=>{let r=qh(e),s=Hh();return(i,o)=>zh(void 0,void 0,void 0,function*(){var a;let c=(a=yield t())!==null&&a!==void 0?a:n,l=new s(o?.headers);return l.has("apikey")||l.set("apikey",n),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:l}))})};var Vh=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})};function bc(n){return n.endsWith("/")?n:n+"/"}function Sc(n,t){var e,r;let{db:s,auth:i,realtime:o,global:a}=n,{db:c,auth:l,realtime:u,global:d}=t,p={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},l),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(e=d?.headers)!==null&&e!==void 0?e:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Vh(this,void 0,void 0,function*(){return""})};return n.accessToken?p.accessToken=n.accessToken:delete p.accessToken,p}var Dn="2.70.0";var Ge=30*1e3,Mn=3,jn=Mn*Ge,Rc="http://localhost:9999",Tc="supabase.auth.token";var Ec={"X-Client-Info":`gotrue-js/${Dn}`};var Sr="X-Supabase-Api-Version",mi={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Cc=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ac=6e5;var Rr=class extends Error{constructor(t,e,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=r}};function S(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var Un=class extends Rr{constructor(t,e,r){super(t,e,r),this.name="AuthApiError",this.status=e,this.code=r}};function Ic(n){return S(n)&&n.name==="AuthApiError"}var At=class extends Rr{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},me=class extends Rr{constructor(t,e,r,s){super(t,r,s),this.name=e,this.status=r}},te=class extends me{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function Oc(n){return S(n)&&n.name==="AuthSessionMissingError"}var We=class extends me{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Je=class extends me{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},Ke=class extends me{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function kc(n){return S(n)&&n.name==="AuthImplicitGrantRedirectError"}var Tr=class extends me{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},It=class extends me{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}};function Nn(n){return S(n)&&n.name==="AuthRetryableFetchError"}var Er=class extends me{constructor(t,e,r){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=r}};var Te=class extends me{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};var Ln="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),xc=` 	
\r=`.split(""),Gh=(()=>{let n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<xc.length;t+=1)n[xc[t].charCodeAt(0)]=-2;for(let t=0;t<Ln.length;t+=1)n[Ln[t].charCodeAt(0)]=t;return n})();function Pc(n,t,e){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;e(Ln[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;e(Ln[r]),t.queuedBits-=6}}function Dc(n,t,e){let r=Gh[n];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function vi(n){let t=[],e=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Kh(o,r,e)};for(let o=0;o<n.length;o+=1)Dc(n.charCodeAt(o),s,i);return t.join("")}function Wh(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Jh(n,t){for(let e=0;e<n.length;e+=1){let r=n.charCodeAt(e);if(r>55295&&r<=56319){let s=(r-55296)*1024&65535;r=(n.charCodeAt(e+1)-56320&65535|s)+65536,e+=1}Wh(r,t)}}function Kh(n,t,e){if(t.utf8seq===0){if(n<=127){e(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&e(t.codepoint)}}function Mc(n){let t=[],e={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<n.length;s+=1)Dc(n.charCodeAt(s),e,r);return new Uint8Array(t)}function jc(n){let t=[];return Jh(n,e=>t.push(e)),new Uint8Array(t)}function Uc(n){let t=[],e={queue:0,queuedBits:0},r=s=>{t.push(s)};return n.forEach(s=>Pc(s,e,r)),Pc(null,e,r),t.join("")}function Nc(n){return Math.round(Date.now()/1e3)+n}function Lc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let t=Math.random()*16|0;return(n=="x"?t:t&3|8).toString(16)})}var re=()=>typeof window<"u"&&typeof document<"u",Xe={tested:!1,writable:!1},xe=()=>{if(!re())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xe.tested)return Xe.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Xe.tested=!0,Xe.writable=!0}catch{Xe.tested=!0,Xe.writable=!1}return Xe.writable};function $c(n){let t={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return e.searchParams.forEach((r,s)=>{t[s]=r}),t}var $n=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-NPJLHOA5.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},Fc=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",yi=(n,t,e)=>h(null,null,function*(){yield n.setItem(t,JSON.stringify(e))}),Ar=(n,t)=>h(null,null,function*(){let e=yield n.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}}),Ir=(n,t)=>h(null,null,function*(){yield n.removeItem(t)}),Cr=class n{constructor(){this.promise=new n.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}};Cr.promiseConstructor=Promise;function Fn(n){let t=n.split(".");if(t.length!==3)throw new Te("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Cc.test(t[r]))throw new Te("JWT not in base64url format");return{header:JSON.parse(vi(t[0])),payload:JSON.parse(vi(t[1])),signature:Mc(t[2]),raw:{header:t[0],payload:t[1]}}}function Bc(n){return h(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),n)})})}function zc(n,t){return new Promise((r,s)=>{h(null,null,function*(){for(let i=0;i<1/0;i++)try{let o=yield n(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})})}function Xh(n){return("0"+n.toString(16)).substr(-2)}function Yh(){let t=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length,s="";for(let i=0;i<56;i++)s+=e.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,Xh).join("")}function Qh(n){return h(this,null,function*(){let e=new TextEncoder().encode(n),r=yield crypto.subtle.digest("SHA-256",e),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")})}function Zh(n){return h(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let e=yield Qh(n);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function Ye(n,t,e=!1){return h(this,null,function*(){let r=Yh(),s=r;e&&(s+="/PASSWORD_RECOVERY"),yield yi(n,`${t}-code-verifier`,s);let i=yield Zh(r);return[i,r===i?"plain":"s256"]})}var ed=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function qc(n){let t=n.headers.get(Sr);if(!t||!t.match(ed))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Hc(n){if(!n)throw new Error("Missing exp claim");let t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function Vc(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var td=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Qe(n){if(!td.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var rd=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(e[r[s]]=n[r[s]]);return e},Ze=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),nd=[502,503,504];function Gc(n){return h(this,null,function*(){var t;if(!Fc(n))throw new It(Ze(n),0);if(nd.includes(n.status))throw new It(Ze(n),n.status);let e;try{e=yield n.json()}catch(i){throw new At(Ze(i),i)}let r,s=qc(n);if(s&&s.getTime()>=mi["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?r=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(r=e.error_code),r){if(r==="weak_password")throw new Er(Ze(e),n.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new te}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Er(Ze(e),n.status,e.weak_password.reasons);throw new Un(Ze(e),n.status||500,r)})}var sd=(n,t,e,r)=>{let s={method:n,headers:t?.headers||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),e))};function T(n,t,e,r){return h(this,null,function*(){var s;let i=Object.assign({},r?.headers);i[Sr]||(i[Sr]=mi["2024-01-01"].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);let o=(s=r?.query)!==null&&s!==void 0?s:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);let a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=yield id(n,t,e+a,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}})}function id(n,t,e,r,s,i){return h(this,null,function*(){let o=sd(t,r,s,i),a;try{a=yield n(e,Object.assign({},o))}catch(c){throw console.error(c),new It(Ze(c),0)}if(a.ok||(yield Gc(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(c){yield Gc(c)}})}function ve(n){var t;let e=null;od(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=Nc(n.expires_in)));let r=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:e,user:r},error:null}}function wi(n){let t=ve(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)&&(t.data.weak_password=n.weak_password),t}function ye(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function Wc(n){return{data:n,error:null}}function Jc(n){let{action_link:t,email_otp:e,hashed_token:r,redirect_to:s,verification_type:i}=n,o=rd(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function Kc(n){return n}function od(n){return n.access_token&&n.refresh_token&&n.expires_in}var Bn=["global","local","others"];var ad=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(e[r[s]]=n[r[s]]);return e},Ot=class{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=$n(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(r){return h(this,arguments,function*(t,e=Bn[0]){if(Bn.indexOf(e)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Bn.join(", ")}`);try{return yield T(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(S(s))return{data:null,error:s};throw s}})}inviteUserByEmail(r){return h(this,arguments,function*(t,e={}){try{return yield T(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:ye})}catch(s){if(S(s))return{data:{user:null},error:s};throw s}})}generateLink(t){return h(this,null,function*(){try{let{options:e}=t,r=ad(t,["options"]),s=Object.assign(Object.assign({},r),e);return"newEmail"in r&&(s.new_email=r?.newEmail,delete s.newEmail),yield T(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Jc,redirectTo:e?.redirectTo})}catch(e){if(S(e))return{data:{properties:null,user:null},error:e};throw e}})}createUser(t){return h(this,null,function*(){try{return yield T(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ye})}catch(e){if(S(e))return{data:{user:null},error:e};throw e}})}listUsers(t){return h(this,null,function*(){var e,r,s,i,o,a,c;try{let l={nextPage:null,lastPage:0,total:0},u=yield T(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Kc});if(u.error)throw u.error;let d=yield u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(v=>{let m=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(v.split(";")[1].split("=")[1]);l[`${y}Page`]=m}),l.total=parseInt(p)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(S(l))return{data:{users:[]},error:l};throw l}})}getUserById(t){return h(this,null,function*(){Qe(t);try{return yield T(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ye})}catch(e){if(S(e))return{data:{user:null},error:e};throw e}})}updateUserById(t,e){return h(this,null,function*(){Qe(t);try{return yield T(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:ye})}catch(r){if(S(r))return{data:{user:null},error:r};throw r}})}deleteUser(t,e=!1){return h(this,null,function*(){Qe(t);try{return yield T(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:ye})}catch(r){if(S(r))return{data:{user:null},error:r};throw r}})}_listFactors(t){return h(this,null,function*(){Qe(t.userId);try{let{data:e,error:r}=yield T(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:e,error:r}}catch(e){if(S(e))return{data:null,error:e};throw e}})}_deleteFactor(t){return h(this,null,function*(){Qe(t.userId),Qe(t.id);try{return{data:yield T(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(S(e))return{data:null,error:e};throw e}})}};var Xc={getItem:n=>xe()?globalThis.localStorage.getItem(n):null,setItem:(n,t)=>{xe()&&globalThis.localStorage.setItem(n,t)},removeItem:n=>{xe()&&globalThis.localStorage.removeItem(n)}};function _i(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}function Yc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var et={debug:!!(globalThis&&xe()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Or=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}},zn=class extends Or{};function bi(n,t,e){return h(this,null,function*(){et.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);let r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),et.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},s=>h(null,null,function*(){if(s){et.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return yield e()}finally{et.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(t===0)throw et.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new zn(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(et.debug)try{let i=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield e()}})))})}Yc();var cd={url:Rc,storageKey:Tc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ec,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function Qc(n,t,e){return h(this,null,function*(){return yield e()})}var Si=(()=>{class n{constructor(e){var r,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&re()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let i=Object.assign(Object.assign({},cd),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Ot({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=$n(i.fetch),this.lock=i.lock||Qc,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:re()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=bi:this.lock=Qc,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:xe()?this.storage=Xc:(this.memoryStorage={},this.storage=_i(this.memoryStorage)):(this.memoryStorage={},this.storage=_i(this.memoryStorage)),re()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",o=>h(this,null,function*(){this._debug("received broadcast notification from other tab or client",o),yield this._notifyAllSubscribers(o.data.event,o.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Dn}) ${new Date().toISOString()}`,...e),this}initialize(){return h(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=h(this,null,function*(){return yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return h(this,null,function*(){var e;try{let r=$c(window.location.href),s="none";if(this._isImplicitGrantCallback(r)?s="implicit":(yield this._isPKCECallback(r))&&(s="pkce"),re()&&this.detectSessionInUrl&&s!=="none"){let{data:i,error:o}=yield this._getSessionFromURL(r,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),kc(o)){let l=(e=o.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return yield this._removeSession(),{error:o}}let{session:a,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),yield this._saveSession(a),setTimeout(()=>h(this,null,function*(){c==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",a):yield this._notifyAllSubscribers("SIGNED_IN",a)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(r){return S(r)?{error:r}:{error:new At("Unexpected error during initialization",r)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(e){return h(this,null,function*(){var r,s,i;try{let o=yield T(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:ve}),{data:a,error:c}=o;if(c||!a)return{data:{user:null,session:null},error:c};let l=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(o){if(S(o))return{data:{user:null,session:null},error:o};throw o}})}signUp(e){return h(this,null,function*(){var r,s,i;try{let o;if("email"in e){let{email:d,password:p,options:f}=e,v=null,m=null;this.flowType==="pkce"&&([v,m]=yield Ye(this.storage,this.storageKey)),o=yield T(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:p,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:v,code_challenge_method:m},xform:ve})}else if("phone"in e){let{phone:d,password:p,options:f}=e;o=yield T(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(s=f?.data)!==null&&s!==void 0?s:{},channel:(i=f?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:ve})}else throw new Je("You must provide either an email or phone number and a password");let{data:a,error:c}=o;if(c||!a)return{data:{user:null,session:null},error:c};let l=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(o){if(S(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithPassword(e){return h(this,null,function*(){try{let r;if("email"in e){let{email:o,password:a,options:c}=e;r=yield T(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:wi})}else if("phone"in e){let{phone:o,password:a,options:c}=e;r=yield T(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:wi})}else throw new Je("You must provide either an email or phone number and a password");let{data:s,error:i}=r;return i?{data:{user:null,session:null},error:i}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new We}:(s.session&&(yield this._saveSession(s.session),yield this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:i})}catch(r){if(S(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOAuth(e){return h(this,null,function*(){var r,s,i,o;return yield this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})})}exchangeCodeForSession(e){return h(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>h(this,null,function*(){return this._exchangeCodeForSession(e)}))})}signInWithWeb3(e){return h(this,null,function*(){let{chain:r}=e;if(r==="solana")return yield this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)})}signInWithSolana(e){return h(this,null,function*(){var r,s,i,o,a,c,l,u,d,p,f,v;let m,y;if("message"in e)m=e.message,y=e.signature;else{let{chain:C,wallet:M,statement:N,options:w}=e,x;if(re())if(typeof M=="object")x=M;else{let D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))x=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=M}let ne=new URL((r=w?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in x&&x.signIn){let D=yield x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w?.signInWithSolana),{version:"1",domain:ne.host,uri:ne.href}),N?{statement:N}:null)),J;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")J=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)J=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in J&&"signature"in J&&(typeof J.signedMessage=="string"||J.signedMessage instanceof Uint8Array)&&J.signature instanceof Uint8Array)m=typeof J.signedMessage=="string"?J.signedMessage:new TextDecoder().decode(J.signedMessage),y=J.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${ne.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${ne.href}`,`Issued At: ${(i=(s=w?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=w?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((c=w?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((p=(d=w?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||p===void 0)&&p.length?["Resources",...w.signInWithSolana.resources.map(J=>`- ${J}`)]:[]].join(`
`);let D=yield x.signMessage(new TextEncoder().encode(m),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=D}}try{let{data:C,error:M}=yield T(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Uc(y)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:ve});if(M)throw M;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new We}:(C.session&&(yield this._saveSession(C.session),yield this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:M})}catch(C){if(S(C))return{data:{user:null,session:null},error:C};throw C}})}_exchangeCodeForSession(e){return h(this,null,function*(){let r=yield Ar(this.storage,`${this.storageKey}-code-verifier`),[s,i]=(r??"").split("/");try{let{data:o,error:a}=yield T(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ve});if(yield Ir(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new We}:(o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(S(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}})}signInWithIdToken(e){return h(this,null,function*(){try{let{options:r,provider:s,token:i,access_token:o,nonce:a}=e,c=yield T(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:ve}),{data:l,error:u}=c;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new We}:(l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(r){if(S(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOtp(e){return h(this,null,function*(){var r,s,i,o,a;try{if("email"in e){let{email:c,options:l}=e,u=null,d=null;this.flowType==="pkce"&&([u,d]=yield Ye(this.storage,this.storageKey));let{error:p}=yield T(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(s=l?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){let{phone:c,options:l}=e,{data:u,error:d}=yield T(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=l?.data)!==null&&i!==void 0?i:{},create_user:(o=l?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new Je("You must provide either an email or phone number.")}catch(c){if(S(c))return{data:{user:null,session:null},error:c};throw c}})}verifyOtp(e){return h(this,null,function*(){var r,s;try{let i,o;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(s=e.options)===null||s===void 0?void 0:s.captchaToken);let{data:a,error:c}=yield T(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:ve});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");let l=a.session,u=a.user;return l?.access_token&&(yield this._saveSession(l),yield this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(S(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithSSO(e){return h(this,null,function*(){var r,s,i;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=yield Ye(this.storage,this.storageKey)),yield T(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:Wc})}catch(o){if(S(o))return{data:null,error:o};throw o}})}reauthenticate(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return h(this,null,function*(){try{return yield this._useSession(e=>h(this,null,function*(){let{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new te;let{error:i}=yield T(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}}))}catch(e){if(S(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return h(this,null,function*(){try{let r=`${this.url}/resend`;if("email"in e){let{email:s,type:i,options:o}=e,{error:a}=yield T(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){let{phone:s,type:i,options:o}=e,{data:a,error:c}=yield T(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:c}}throw new Je("You must provide either an email or phone number and a type")}catch(r){if(S(r))return{data:{user:null,session:null},error:r};throw r}})}getSession(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return this._useSession(r=>h(this,null,function*(){return r}))}))})}_acquireLock(e,r){return h(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=h(this,null,function*(){return yield s,yield r()});return this.pendingInLock.push(h(this,null,function*(){try{yield i}catch{}})),i}return yield this.lock(`lock:${this.storageKey}`,e,()=>h(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let s=r();for(this.pendingInLock.push(h(this,null,function*(){try{yield s}catch{}})),yield s;this.pendingInLock.length;){let i=[...this.pendingInLock];yield Promise.all(i),this.pendingInLock.splice(0,i.length)}return yield s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return h(this,null,function*(){this._debug("#_useSession","begin");try{let r=yield this.__loadSession();return yield e(r)}finally{this._debug("#_useSession","end")}})}__loadSession(){return h(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,r=yield Ar(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};let s=e.expires_at?e.expires_at*1e3-Date.now()<jn:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:e},error:null}}let{session:i,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(e){return h(this,null,function*(){return e?yield this._getUser(e):(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._getUser()})))})}_getUser(e){return h(this,null,function*(){try{return e?yield T(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ye}):yield this._useSession(r=>h(this,null,function*(){var s,i,o;let{data:a,error:c}=r;if(c)throw c;return!(!((s=a.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new te}:yield T(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:ye})}))}catch(r){if(S(r))return Oc(r)&&(yield this._removeSession(),yield Ir(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}})}updateUser(s){return h(this,arguments,function*(e,r={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._updateUser(e,r)}))})}_updateUser(s){return h(this,arguments,function*(e,r={}){try{return yield this._useSession(i=>h(this,null,function*(){let{data:o,error:a}=i;if(a)throw a;if(!o.session)throw new te;let c=o.session,l=null,u=null;this.flowType==="pkce"&&e.email!=null&&([l,u]=yield Ye(this.storage,this.storageKey));let{data:d,error:p}=yield T(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:u}),jwt:c.access_token,xform:ye});if(p)throw p;return c.user=d.user,yield this._saveSession(c),yield this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}}))}catch(i){if(S(i))return{data:{user:null},error:i};throw i}})}setSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return h(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new te;let r=Date.now()/1e3,s=r,i=!0,o=null,{payload:a}=Fn(e.access_token);if(a.exp&&(s=a.exp,i=s<=r),i){let{session:c,error:l}=yield this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!c)return{data:{user:null,session:null},error:null};o=c}else{let{data:c,error:l}=yield this._getUser(e.access_token);if(l)throw l;o={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:s-r,expires_at:s},yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(S(r))return{data:{session:null,user:null},error:r};throw r}})}refreshSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s;if(!e){let{data:a,error:c}=r;if(c)throw c;e=(s=a.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new te;let{session:i,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}}))}catch(r){if(S(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromURL(e,r){return h(this,null,function*(){try{if(!re())throw new Ke("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ke(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Tr("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ke("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Tr("No code detected.");let{data:N,error:w}=yield this._exchangeCodeForSession(e.code);if(w)throw w;let x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:N.session,redirectType:null},error:null}}let{provider_token:s,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:c,expires_at:l,token_type:u}=e;if(!o||!c||!a||!u)throw new Ke("No session defined in URL");let d=Math.round(Date.now()/1e3),p=parseInt(c),f=d+p;l&&(f=parseInt(l));let v=f-d;v*1e3<=Ge&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${p}s`);let m=f-p;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);let{data:y,error:C}=yield this._getUser(o);if(C)throw C;let M={provider_token:s,provider_refresh_token:i,access_token:o,expires_in:p,expires_at:f,refresh_token:a,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:M,redirectType:e.type},error:null}}catch(s){if(S(s))return{data:{session:null,redirectType:null},error:s};throw s}})}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}_isPKCECallback(e){return h(this,null,function*(){let r=yield Ar(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)})}signOut(){return h(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return h(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(r=>h(this,null,function*(){var s;let{data:i,error:o}=r;if(o)return{error:o};let a=(s=i.session)===null||s===void 0?void 0:s.access_token;if(a){let{error:c}=yield this.admin.signOut(a,e);if(c&&!(Ic(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(yield this._removeSession(),yield Ir(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(e){let r=Lc(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),h(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){this._emitInitialSession(r)}))}),{data:{subscription:s}}}_emitInitialSession(e){return h(this,null,function*(){return yield this._useSession(r=>h(this,null,function*(){var s,i;try{let{data:{session:o},error:a}=r;if(a)throw a;yield(s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){yield(i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}}))})}resetPasswordForEmail(s){return h(this,arguments,function*(e,r={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=yield Ye(this.storage,this.storageKey,!0));try{return yield T(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(S(a))return{data:null,error:a};throw a}})}getUserIdentities(){return h(this,null,function*(){var e;try{let{data:r,error:s}=yield this.getUser();if(s)throw s;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(S(r))return{data:null,error:r};throw r}})}linkIdentity(e){return h(this,null,function*(){var r;try{let{data:s,error:i}=yield this._useSession(o=>h(this,null,function*(){var a,c,l,u,d;let{data:p,error:f}=o;if(f)throw f;let v=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return yield T(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})}));if(i)throw i;return re()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if(S(s))return{data:{provider:e.provider,url:null},error:s};throw s}})}unlinkIdentity(e){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s,i;let{data:o,error:a}=r;if(a)throw a;return yield T(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0})}))}catch(r){if(S(r))return{data:null,error:r};throw r}})}_refreshAccessToken(e){return h(this,null,function*(){let r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{let s=Date.now();return yield zc(i=>h(this,null,function*(){return i>0&&(yield Bc(200*Math.pow(2,i-1))),this._debug(r,"refreshing attempt",i),yield T(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ve})}),(i,o)=>{let a=200*Math.pow(2,i);return o&&Nn(o)&&Date.now()+a-s<Ge})}catch(s){if(this._debug(r,"error",s),S(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,r){return h(this,null,function*(){let s=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),re()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}})}_recoverAndRefresh(){return h(this,null,function*(){var e;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let s=yield Ar(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&(yield this._removeSession());return}let i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<jn;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${jn}s`),i){if(this.autoRefreshToken&&s.refresh_token){let{error:o}=yield this._callRefreshToken(s.refresh_token);o&&(console.error(o),Nn(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}})}_callRefreshToken(e){return h(this,null,function*(){var r,s;if(!e)throw new te;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Cr;let{data:o,error:a}=yield this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new te;yield this._saveSession(o.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let c={session:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(i,"error",o),S(o)){let a={session:null,error:o};return Nn(o)||(yield this._removeSession()),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}})}_notifyAllSubscribers(e,r,s=!0){return h(this,null,function*(){let i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});let o=[],a=Array.from(this.stateChangeEmitters.values()).map(c=>h(this,null,function*(){try{yield c.callback(e,r)}catch(l){o.push(l)}}));if(yield Promise.all(a),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(i,"end")}})}_saveSession(e){return h(this,null,function*(){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,yield yi(this.storage,this.storageKey,e)})}_removeSession(){return h(this,null,function*(){this._debug("#_removeSession()"),yield Ir(this.storage,this.storageKey),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&re()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){return h(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),Ge);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(()=>h(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return h(this,null,function*(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return h(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>h(this,null,function*(){try{let e=Date.now();try{return yield this._useSession(r=>h(this,null,function*(){let{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let i=Math.floor((s.expires_at*1e3-e)/Ge);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ge}ms, refresh threshold is ${Mn} ticks`),i<=Mn&&(yield this._callRefreshToken(s.refresh_token))}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(e.isAcquireTimeout||e instanceof Or)this._debug("auto refresh token tick lock not available");else throw e}})}_handleVisibilityChange(){return h(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!re()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>h(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return h(this,null,function*(){let r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,r,s){return h(this,null,function*(){let i=[`provider=${encodeURIComponent(r)}`];if(s?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&i.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){let[o,a]=yield Ye(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(c.toString())}if(s?.queryParams){let o=new URLSearchParams(s.queryParams);i.push(o.toString())}return s?.skipBrowserRedirect&&i.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${i.join("&")}`})}_unenroll(e){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s;let{data:i,error:o}=r;return o?{data:null,error:o}:yield T(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token})}))}catch(r){if(S(r))return{data:null,error:r};throw r}})}_enroll(e){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s,i;let{data:o,error:a}=r;if(a)return{data:null,error:a};let c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=yield T(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=l?.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})}))}catch(r){if(S(r))return{data:null,error:r};throw r}})}_verify(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s;let{data:i,error:o}=r;if(o)return{data:null,error:o};let{data:a,error:c}=yield T(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:c})}))}catch(r){if(S(r))return{data:null,error:r};throw r}}))})}_challenge(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s;let{data:i,error:o}=r;return o?{data:null,error:o}:yield T(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token})}))}catch(r){if(S(r))return{data:null,error:r};throw r}}))})}_challengeAndVerify(e){return h(this,null,function*(){let{data:r,error:s}=yield this._challenge({factorId:e.factorId});return s?{data:null,error:s}:yield this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})})}_listFactors(){return h(this,null,function*(){let{data:{user:e},error:r}=yield this.getUser();if(r)return{data:null,error:r};let s=e?.factors||[],i=s.filter(a=>a.factor_type==="totp"&&a.status==="verified"),o=s.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:s,totp:i,phone:o},error:null}})}_getAuthenticatorAssuranceLevel(){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){return yield this._useSession(e=>h(this,null,function*(){var r,s;let{data:{session:i},error:o}=e;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:a}=Fn(i.access_token),c=null;a.aal&&(c=a.aal);let l=c;((s=(r=i.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(l="aal2");let d=a.amr||[];return{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}))})}fetchJwk(s){return h(this,arguments,function*(e,r={keys:[]}){let i=r.keys.find(c=>c.kid===e);if(i||(i=this.jwks.keys.find(c=>c.kid===e),i&&this.jwks_cached_at+Ac>Date.now()))return i;let{data:o,error:a}=yield T(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!o.keys||o.keys.length===0)throw new Te("JWKS is empty");if(this.jwks=o,this.jwks_cached_at=Date.now(),i=o.keys.find(c=>c.kid===e),!i)throw new Te("No matching signing key found in JWKS");return i})}getClaims(s){return h(this,arguments,function*(e,r={keys:[]}){try{let i=e;if(!i){let{data:m,error:y}=yield this.getSession();if(y||!m.session)return{data:null,error:y};i=m.session.access_token}let{header:o,payload:a,signature:c,raw:{header:l,payload:u}}=Fn(i);if(Hc(a.exp),!o.kid||o.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){let{error:m}=yield this.getUser(i);if(m)throw m;return{data:{claims:a,header:o,signature:c},error:null}}let d=Vc(o.alg),p=yield this.fetchJwk(o.kid,r),f=yield crypto.subtle.importKey("jwk",p,d,!0,["verify"]);if(!(yield crypto.subtle.verify(d,f,c,jc(`${l}.${u}`))))throw new Te("Invalid JWT signature");return{data:{claims:a,header:o,signature:c},error:null}}catch(i){if(S(i))return{data:null,error:i};throw i}})}}return n.nextInstanceID=0,n})();var ld=Si,Ri=ld;var qn=class extends Ri{constructor(t){super(t)}};var ud=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})},Hn=class{constructor(t,e,r){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");let a=bc(t),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);let l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:vc,realtime:wc,auth:Object.assign(Object.assign({},yc),{storageKey:l}),global:mc},d=Sc(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(p,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=_c(e,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Za(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new lr(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new _r(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return ud(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:c},l,u){let d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new qn({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new yr(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var Zc=(n,t,e)=>new Hn(n,t,e);var Ti={production:!1,apiUrl:"https://thjghthispuglpuxbuhm.supabase.co",publicAnonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRoamdodGhpc3B1Z2xwdXhidWhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA0MjQwMjksImV4cCI6MjA2NjAwMDAyOX0.GoCGD87zbBhtK6Ykmxwt_wlb1I5kL_VcHUgN2RWd9rQ"};var el=class n{supabase;constructor(){this.supabase=Zc(Ti.apiUrl,Ti.publicAnonKey)}getClient(){return this.supabase}static \u0275fac=function(e){return new(e||n)};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})};export{ms as a,vl as b,kl as c,Pl as d,zs as e,pe as f,Ca as g,lh as h,uh as i,el as j};
